function open(){function t(t,e,a){var r=Ti.Network.createHTTPClient();r.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var n=[{SessionID:t,LanguageCode:e,VirtualNetwork:a}],i=generateXML("http://service.adminportal.vasx.com/","getDisplayNames",n);r.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),r.setRequestHeader("Content-Type","text/xml"),r.setRequestHeader("Content-Length",i.length),r.setRequestHeader("SOAPAction",'"getDisplayNames"'),r.send(i),r.onload=function(){var t=[],e=r.responseXML.documentElement.getElementsByTagName("getDisplayNamesResponse");if(Ti.API.info(e.item(0).text),e&&e.length>0){for(var a=Ti.XML.parseString(e.item(0).text),n=a.getElementsByTagName("Name"),i=0;n.length>i;i++)for(var o=0;n.item(i).getElementsByTagName("DisplayName").length>o;o++){var c=n.item(i).getElementsByTagName("DisplayName").item(o).text,l=n.item(i).getElementsByTagName("OtherParty").item(o).text;t.push({name:c,number:l})}for(var h=[],i=0;t.length>i;i++){var u=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",height:40}),d=Ti.UI.createLabel({text:t[i].name+": "+t[i].number,color:"black",font:{fontSize:"16pt",fontWeight:"bold"},left:"2%",right:"2%"});u.add(d),h.push(u)}s.setData(h)}}}function e(t,e,a,r,n){var i=Ti.Network.createHTTPClient();i.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var o=[{SessionID:t,LanguageCode:e,CalledNumber:a,DisplayName:r,VirtualNetwork:n}],s=generateXML("http://service.adminportal.vasx.com/","setDisplayName",o);i.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),i.setRequestHeader("Content-Type","text/xml"),i.setRequestHeader("Content-Length",s.length),i.setRequestHeader("SOAPAction",'"setDisplayName"'),i.send(s),i.onload=function(){var t=i.responseXML.documentElement.getElementsByTagName("setDisplayNameResponse");if(t&&t.length>0){Ti.API.info(t.item(0).text);var e=Ti.XML.parseString(t.item(0).text);alert(e.getElementsByTagName("Message").item(0).text)}}}function a(){n.open()}function r(){n.close()}Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js"),theme("blue");var n=Ti.UI.createWindow({backgroundColor:"pink",left:"51%"});n.backgroundColor=Ti.App.backgroundColor,t(Ti.App.Session,Ti.App.Language,1);var i=Ti.UI.createTextField({hintText:"Enter phone number",color:"black",top:"13%",width:"80%",height:"20%",font:{fontSize:24,fontWeight:"bold"},backgroundColor:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER}),o=Ti.UI.createTextField({hintText:"Enter name",color:"black",top:"40%",width:"80%",height:"20%",font:{fontSize:24,fontWeight:"bold"},backgroundColor:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,autocorrect:!1}),s=Ti.UI.createTableView({backgroundColor:"transparent",separatorColor:Ti.App.backgroundColor,editable:!0,editing:!0}),c=Ti.UI.createButton({title:"Add",top:"70%",width:"35%",bottom:"10%"}),l=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,top:"51.5%",left:"3%",right:"3%",bottom:"3%",borderRadius:10}),h=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"45.5%",left:"3%",right:"3%",top:"3%",borderRadius:10});return c.addEventListener("click",function(){e(Ti.App.Session,Ti.App.Language,i.getValue(),o.getValue(),1),t(Ti.App.Session,Ti.App.Language,1)}),i.addEventListener("click",function(){i.blur(),i.keyboardType=Ti.UI.KEYBOARD_PHONE_PAD,i.focus()}),phoneSwipeWindow(n),closeMenu(n),h.add(o),h.add(i),n.add(h),n.add(l),h.add(c),l.add(s),n.openWin=a,n.close=r,n}exports.open=open;