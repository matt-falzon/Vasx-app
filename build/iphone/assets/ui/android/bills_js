function open(){function t(){f.setText(lastPaymentText);var t=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",title:amountText,height:40});g.setText("$67.65"),t.add(g),c.push(t);var t=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",title:dateText,height:40,width:"70%"});m.setText("15/6/13"),t.add(m),c.push(t),v.setData(c),c=[]}function e(){_.setText(currentBalanceText);var t=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",title:totalDueText,height:40});y.setText("..."),"test"!=Ti.App.firstName&&n(Ti.App.Session,"en",1),t.add(y),c.push(t);var t=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",title:paymentDueDateText,height:40});b.setText("17/8/13"),t.add(b),c.push(t),R.setData(c),c=[]}function a(){var t=[{hasDetail:!0,title:viewAsPdfText,url:"pdfPrint.js"}];x.setData(t)}function r(){"pt"==Ti.App.Language?(amountText="quantidade",dateText="data",lastPaymentText="último pagamento",currentBalanceText="saldo atual",totalDueText="total devido",paymentDueDateText="data de vencimento",viewAsPdfText="ver em pdf",viewAllDocumentsText="ver todos os documentos"):"fr"==Ti.App.Language?(amountText="chamadas: ",dateText="dados: ",lastPaymentText="tempo de sobra: ",currentBalanceText="solde courant",totalDueText="total dû",paymentDueDateText="paiement date d'échéance",viewAsPdfText="Afficher au format PDF",viewAllDocumentsText="Voir tous les documents"):(amountText="Amount",dateText="Date",lastPaymentText="Last Payment",currentBalanceText="Current Balance",totalDueText="Total Due",paymentDueDateText="Payment Due Date",viewAsPdfText="View as PDF",viewAllDocumentsText="View All Documents")}function n(t,e,a){var r=Ti.Network.createHTTPClient();r.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var n=[{SessionID:t,LanguageCode:e,VirtualNetwork:a}],i=generateXML("http://service.adminportal.vasx.com/","getAgingData",n);r.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),r.setRequestHeader("Content-Type","text/xml"),r.setRequestHeader("Content-Length",i.length),r.setRequestHeader("SOAPAction",'"getAgingData"'),r.send(i),r.onload=function(){var t=r.responseXML.documentElement.getElementsByTagName("getAgingDataResponse");if(Ti.API.info(t.item(0).text),t&&t.length>0){var e=Ti.XML.parseString(t.item(0).text);e.getElementsByTagName("Message");var a=e.getElementsByTagName("CurrentBalance");y.setText("$"+a.item(0).text)}}}function i(){s.open()}function o(){s.close()}Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js");var s=Ti.UI.createWindow({backgroundColor:"pink",left:"51%"});r(),theme("white");var c=[],l=Ti.UI.createScrollView({backgroundColor:Ti.App.backgroundColor,top:0,horizontalBounce:!1,horizontalWrap:!1}),h=Ti.UI.createView({height:"100.5%",backgroundImage:Ti.Filesystem.resourcesDirectory+"/images/common/background.png"}),u=Ti.UI.createView({height:"70%",top:"-70%",backgroundColor:Ti.UI.backgroundColor}),d=Ti.UI.createActivityIndicator({color:"white",font:{fontFamily:"Helvetica Neue",fontSize:26,fontWeight:"bold"},message:"Updating...",style:Ti.UI.iPhone.ActivityIndicatorStyle.DARK,bottom:10});d.show();var p=Ti.UI.createButton({title:"Log out",style:Ti.UI.iPhone.SystemButtonStyle.BORDERED}),f=Ti.UI.createLabel({text:lastPaymentText,top:"15%"}),g=Ti.UI.createLabel({font:{fontSize:22,fontWeight:"bold"},right:15,color:Ti.App.foregroundColor}),m=Ti.UI.createLabel({font:{fontSize:24,fontWeight:"bold"},right:15,color:Ti.App.foregroundColor}),v=Ti.UI.createTableView({data:c,backgroundColor:"transparent",scrollable:!1,allowsSelection:!1,separatorColor:Ti.App.foregroundColor}),y=Ti.UI.createLabel({font:{fontSize:24,fontWeight:"bold"},right:15,color:Ti.App.foregroundColor}),_=Ti.UI.createLabel({text:currentBalanceText,top:"15%"}),b=Ti.UI.createLabel({text:"...",font:{fontSize:24,fontWeight:"bold"},right:15,color:Ti.App.foregroundColor}),R=Ti.UI.createTableView({data:c,backgroundColor:"transparent",scrollable:!1,allowsSelection:!1,separatorColor:Ti.App.foregroundColor}),x=Ti.UI.createTableView({backgroundColor:"transparent",scrollable:!1,allowsSelection:!0,separatorColor:Ti.App.foregroundColor});x.addEventListener("click",function(t){if(t.rowData.url)var e=Ti.UI.createWindow({backgroundColor:"#fff",title:t.rowData.title,url:t.rowData.url,id:s.id});Ti.UI.currentTab.open(e)}),r(),a(),e(),t(),p.addEventListener("click",function(){endSession()});var w=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4});theViewWrapper=Ti.UI.createView({backgroundColor:"transparent",height:"17%",left:"3%",right:"3%",top:"13%"});var G=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4});titleViewWrapper=Ti.UI.createView({backgroundColor:"transparent",height:"10%",left:"3%",right:"3%",top:"3%"});var T=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4}),C=Ti.UI.createView({backgroundColor:"transparent",height:"10%",left:"3%",right:"3%",top:"33%"}),E=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4}),S=Ti.UI.createView({backgroundColor:"transparent",height:"9.2%",left:"3%",right:"3%",top:"62.5%"}),k=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4}),I=Ti.UI.createView({backgroundColor:"transparent",height:"17%",left:"3%",right:"3%",top:"42.5%"}),A=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"6%",width:"100%",bottom:"0%"}),B=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"6%",width:"100%",bottom:"0%"});return closeMenu(s),phoneSwipeWindow(s),h.add(S),S.add(E),S.add(x),h.add(I),I.add(k),I.add(R),h.add(C),C.add(T),C.add(B),C.add(_),h.add(titleViewWrapper),titleViewWrapper.add(G),titleViewWrapper.add(A),titleViewWrapper.add(f),h.add(theViewWrapper),theViewWrapper.add(w),theViewWrapper.add(v),s.add(l),l.add(h),l.add(u),u.add(d),s.openWin=i,s.close=o,s}exports.open=open;