function open(){function t(t,e,a,r,n){var i=Ti.Network.createHTTPClient();i.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var o=[{SessionID:t,LanguageCode:e,Recipient:a,Message:r,VirtualNetwork:n}],s=generateXML("http://service.adminportal.vasx.com/","sendSMS",o);i.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),i.setRequestHeader("Content-Type","text/xml"),i.setRequestHeader("Content-Length",s.length),i.setRequestHeader("SOAPAction",'"sendSMS"'),i.send(s),i.onload=function(){var t=i.responseXML.documentElement.getElementsByTagName("sendSMSResponse");if(Ti.API.info(t.item(0).text),t&&t.length>0){var e=Ti.XML.parseString(t.item(0).text),a=e.getElementsByTagName("Message");alert(a.item(0).text)}}}function e(){r.open()}function a(){r.close()}Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js"),theme("white");var r=Ti.UI.createWindow({backgroundColor:"pink",left:"51%"});r.backgroundColor=Ti.App.backgroundColor,Ti.App.theMessage;var n=Ti.UI.createTextField({hintText:"Enter phone number",color:"black",top:"13%",width:"80%",height:"30%",font:{fontSize:24,fontWeight:"bold"},backgroundColor:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER}),i=Ti.UI.createButton({title:"Compose",top:"65%",left:"10%",width:"35%",bottom:"10%"}),o=Ti.UI.createButton({title:"Send",top:"65%",right:"10%",width:"35%",bottom:"10%"}),s=Ti.UI.createTableView({data:getContacts(),backgroundColor:"transparent",separatorColor:Ti.App.backgroundColor,color:"black"});n.addEventListener("click",function(){n.blur(),n.keyboardType=Ti.UI.KEYBOARD_PHONE_PAD,n.focus()}),s.addEventListener("click",function(t){var e=t.rowData.msisdn;Ti.API.info(e),n.setValue(e)}),o.addEventListener("click",function(){""==n.getValue()?alert("Select a phone number first"):(t(Ti.App.Session,"en",n.getValue(),Ti.App.theMessage,1),Ti.API.info(Ti.App.theMessage),Ti.App.theMessage="",Ti.App.freeSMS>0&&Ti.App.freeSMS--)}),i.addEventListener("click",function(){var t=Ti.UI.create2DMatrix();t=t.scale(0);var e=Ti.UI.createWindow({backgroundColor:Ti.App.backgroundColor,borderWidth:8,borderColor:Ti.App.foregroundColor,height:"89%",width:"93%",borderRadius:10,opacity:.7,transform:t}),a=Ti.UI.create2DMatrix();a=a.scale(1.1);var r=Ti.UI.createAnimation();r.transform=a,r.duration=200,r.addEventListener("complete",function(){Ti.API.info("here in complete");var t=Ti.UI.create2DMatrix();t=t.scale(1),e.animate({transform:t,duration:200})});var n=Ti.UI.createButton({title:"Done",height:"7%",width:"50%",bottom:"8%"});e.add(n),n.addEventListener("click",function(){Ti.App.theMessage=messageField.getValue();var t=Ti.UI.create2DMatrix();t=t.scale(0),e.close({transform:t,duration:300})}),messageField=Ti.UI.createTextArea({top:"5%",left:"5%",right:"5%",bottom:"18%",editable:!0,hintText:"Enter your message",font:{fontSize:18},backgroundColor:"white",value:Ti.App.theMessage}),e.add(messageField),e.open(r),messageField.keyboardType=Ti.UI.KEYBOARD_ASCII,messageField.appearance=Ti.UI.KEYBOARD_APPEARANCE_ALERT,messageField.enableReturnKey=!1,messageField.returnKeyType=Ti.UI.RETURNKEY_DONE,messageField.focus(),messageField.addEventListener("swipe",function(t){"down"==t.direction?messageField.blur():"up"==t.direction&&messageField.focus()})});var c=Ti.UI.createScrollView({backgroundColor:Ti.UI.backgroundColor,top:0,horizontalBounce:!1,horizontalWrap:!1}),l=Ti.UI.createView({height:"100.5%",backgroundImage:Ti.Filesystem.resourcesDirectory+"/images/common/background.png"}),h=Ti.UI.createView({height:"70%",top:"-70%",backgroundColor:Ti.UI.backgroundColor}),u=Ti.UI.createActivityIndicator({color:"white",font:{fontFamily:"Helvetica Neue",fontSize:26,fontWeight:"bold"},message:"Updating...",style:Ti.UI.iPhone.ActivityIndicatorStyle.DARK,bottom:10});u.show();var d=Ti.UI.createView({height:Ti.UI.SIZE,layout:"vertical",backgroundColor:"transparent",top:"3%"}),p=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4});headerViewWrapper=Ti.UI.createView({backgroundColor:"transparent",height:"51.5%",left:"3%",right:"3%",borderRadius:10});var f=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4}),g=Ti.UI.createView({backgroundColor:"transparent",top:"5%",left:"3%",right:"3%",bottom:"5%",borderRadius:10,opacity:.4});return phoneSwipeWindow(r),closeMenu(r),l.add(d),headerViewWrapper.add(p),g.add(f),headerViewWrapper.add(n),headerViewWrapper.add(o),headerViewWrapper.add(i),g.add(s),d.add(headerViewWrapper),d.add(g),r.add(c),c.add(l),c.add(h),h.add(u),r.openWin=e,r.close=a,r}exports.open=open;