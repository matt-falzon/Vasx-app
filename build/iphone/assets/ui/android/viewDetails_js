function open(){function e(e,t,a){function i(e,t,a,i,l,c){var h=Ti.Network.createHTTPClient();h.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var u=[{SessionID:e,LanguageCode:t,Msisdn:a,VirtualNetwork:i}],d=generateXML("http://service.adminportal.vasx.com/","getServices",u);h.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),h.setRequestHeader("Content-Type","text/xml"),h.setRequestHeader("Content-Length",d.length),h.setRequestHeader("SOAPAction",'"getServices"'),h.send(d),h.onload=function(){var e=h.responseXML.documentElement.getElementsByTagName("getServicesResponse");if(e&&e.length>0){Ti.API.info(e.item(0).text);var t=Ti.XML.parseString(e.item(0).text),a=t.getElementsByTagName("ServiceCode").item(0).text,i=t.getElementsByTagName("ServiceID").item(0).text,u=t.getElementsByTagName("ServiceName").item(0).text,d=t.getElementsByTagName("ActiveService").item(0).text,p=t.getElementsByTagName("ActiveFrom").item(0).text,g=t.getElementsByTagName("Administerable").item(0).text,f=t.getElementsByTagName("SubscriptionCharge").item(0).text;l.push(u),c.push("ServiceName: "),l.push(a),c.push("Code: "),l.push(i),c.push("ID: "),l.push(d),c.push("Active: "),l.push(p),c.push("Active from: "),l.push(g),c.push("Administerable: "),l.push(f),c.push("Subscription charge: ");for(var m=[],v=0;l.length>v;v++){var y=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",height:40}),b=Ti.UI.createLabel({text:c[v],color:"black",font:{fontSize:"12pt",fontWeight:"bold"},left:"2%",right:"2%"}),T=Ti.UI.createLabel({text:l[v],font:{fontSize:"14pt",fontWeight:"bold"},right:"2%",width:"60%",color:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT});y.add(b),y.add(T),m.push(y)}var _=Ti.UI.createTableView({backgroundColor:"transparent",data:m,separatorColor:Ti.App.backgroundColor});r.add(o),o.add(n),o.add(_),s.setVisible(!1)}}}var l=Ti.Network.createHTTPClient();l.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var c=[{SessionID:e,LanguageCode:t,VirtualNetwork:a}],h=generateXML("http://service.adminportal.vasx.com/","getAccountData",c);l.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),l.setRequestHeader("Content-Type","text/xml"),l.setRequestHeader("Content-Length",h.length),l.setRequestHeader("SOAPAction",'"getAccountData"'),l.send(h),l.onload=function(){var r=l.responseXML.documentElement.getElementsByTagName("getAccountDataResponse");if(Ti.API.info(r.item(0).text),r&&r.length>0){var n=[],o=[],s=Ti.XML.parseString(r.item(0).text);s.getElementsByTagName("Message");var c=s.getElementsByTagName("AccountNumber"),h=s.getElementsByTagName("AccountName"),u=s.getElementsByTagName("EmailAddress"),d=s.getElementsByTagName("Line1"),p=s.getElementsByTagName("Line2"),g=s.getElementsByTagName("Line3"),f=s.getElementsByTagName("Line4"),m=s.getElementsByTagName("Line5");n.push(c.item(0).text),o.push("Account Number: "),n.push(h.item(0).text),o.push("Account Name: "),""!=u.item(0).text&&(n.push(u.item(0).text),o.push("Email Address: ")),o.push("Address:"),n.push(d.item(0).text),""!=p.item(0).text&&(n.push(p.item(0).text),o.push("")),""!=g.item(0).text&&(n.push(g.item(0).text),o.push("")),""!=f.item(0).text&&(n.push(f.item(0).text),o.push("")),""!=m.item(0).text&&(n.push(m.item(0).text),o.push("")),i(e,t,Ti.App.msisdn,a,n,o)}}}function t(){r.open()}function a(){r.close()}Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js");var r=Ti.UI.createWindow({backgroundColor:"pink",left:"51%",backgroundImage:Ti.Filesystem.resourcesDirectory+"/images/common/background.png"});theme("white"),r.backgroundColor=Ti.App.backgroundColor;var i,n=Ti.UI.createView({backgroundColor:"white",opacity:.4}),o=Ti.UI.createView({backgroundColor:"transparent",left:"3%",right:"3%",top:"3%",bottom:"3%",borderRadius:10});i="iPhone OS"===Ti.Platform.name?Ti.UI.iPhone.ActivityIndicatorStyle.DARK:Ti.UI.ActivityIndicatorStyle.DARK;var s=Ti.UI.createActivityIndicator({color:Ti.App.foregroundColor,font:{fontFamily:"Helvetica Neue",fontSize:26,fontWeight:"bold"},message:"Loading...",style:i,height:Ti.UI.SIZE,width:Ti.UI.SIZE,visible:!1});return r.addEventListener("focus",function(){s.setVisible(!0)}),e(Ti.App.Session,"en",1),closeMenu(r),phoneSwipeWindow(r),r.add(s),r.openWin=t,r.close=a,r}exports.open=open;