function open(){function e(e,t,a){var r=Ti.Network.createHTTPClient();r.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var i=[{SessionID:e,LanguageCode:t,VirtualNetwork:a}],o=generateXML("http://service.adminportal.vasx.com/","getDisplayNames",i);r.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),r.setRequestHeader("Content-Type","text/xml"),r.setRequestHeader("Content-Length",o.length),r.setRequestHeader("SOAPAction",'"getDisplayNames"'),r.send(o),r.onload=function(){var e=[],t=r.responseXML.documentElement.getElementsByTagName("getDisplayNamesResponse");if(Ti.API.info(t.item(0).text),t&&t.length>0){for(var a=Ti.XML.parseString(t.item(0).text),i=a.getElementsByTagName("Name"),o=0;i.length>o;o++)for(var n=0;i.item(o).getElementsByTagName("DisplayName").length>n;n++){var l=i.item(o).getElementsByTagName("DisplayName").item(n).text,c=i.item(o).getElementsByTagName("OtherParty").item(n).text;e.push({name:l,number:c})}for(var d=[],o=0;e.length>o;o++){var u=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",height:40}),h=Ti.UI.createLabel({text:e[o].name+": "+e[o].number,color:"black",font:{fontSize:"16pt",fontWeight:"bold"},left:"2%",right:"2%"});u.add(h),d.push(u)}s.setData(d)}}}function t(e,t,a,r,i){var o=Ti.Network.createHTTPClient();o.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var n=[{SessionID:e,LanguageCode:t,CalledNumber:a,DisplayName:r,VirtualNetwork:i}],s=generateXML("http://service.adminportal.vasx.com/","setDisplayName",n);o.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),o.setRequestHeader("Content-Type","text/xml"),o.setRequestHeader("Content-Length",s.length),o.setRequestHeader("SOAPAction",'"setDisplayName"'),o.send(s),o.onload=function(){var e=o.responseXML.documentElement.getElementsByTagName("setDisplayNameResponse");if(e&&e.length>0){Ti.API.info(e.item(0).text);var t=Ti.XML.parseString(e.item(0).text);alert(t.getElementsByTagName("Message").item(0).text)}}}function a(){i.open()}function r(){i.close()}Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js"),theme("blue");var i=Ti.UI.createWindow({backgroundColor:"pink",left:"51%"});i.backgroundColor=Ti.App.backgroundColor,e(Ti.App.Session,Ti.App.Language,1);var o=Ti.UI.createTextField({hintText:"Enter phone number",color:"black",top:"13%",width:"80%",height:"20%",font:{fontSize:24,fontWeight:"bold"},backgroundColor:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER}),n=Ti.UI.createTextField({hintText:"Enter name",color:"black",top:"40%",width:"80%",height:"20%",font:{fontSize:24,fontWeight:"bold"},backgroundColor:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,autocorrect:!1}),s=Ti.UI.createTableView({backgroundColor:"transparent",separatorColor:Ti.App.backgroundColor,editable:!0,editing:!0}),l=Ti.UI.createButton({title:"Add",top:"70%",width:"35%",bottom:"10%"}),c=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,top:"51.5%",left:"3%",right:"3%",bottom:"3%",borderRadius:10}),d=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"45.5%",left:"3%",right:"3%",top:"3%",borderRadius:10});return l.addEventListener("click",function(){t(Ti.App.Session,Ti.App.Language,o.getValue(),n.getValue(),1),e(Ti.App.Session,Ti.App.Language,1)}),o.addEventListener("click",function(){o.blur(),o.keyboardType=Ti.UI.KEYBOARD_PHONE_PAD,o.focus()}),phoneSwipeWindow(i),closeMenu(i),d.add(n),d.add(o),i.add(d),i.add(c),d.add(l),c.add(s),i.openWin=a,i.close=r,i}exports.open=open;