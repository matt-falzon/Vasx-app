function open(){function e(e,t,a,r,i){var o=Ti.Network.createHTTPClient();o.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var n=[{SessionID:e,LanguageCode:t,Recipient:a,Message:r,VirtualNetwork:i}],s=generateXML("http://service.adminportal.vasx.com/","sendSMS",n);o.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),o.setRequestHeader("Content-Type","text/xml"),o.setRequestHeader("Content-Length",s.length),o.setRequestHeader("SOAPAction",'"sendSMS"'),o.send(s),o.onload=function(){var e=o.responseXML.documentElement.getElementsByTagName("sendSMSResponse");if(Ti.API.info(e.item(0).text),e&&e.length>0){var t=Ti.XML.parseString(e.item(0).text),a=t.getElementsByTagName("Message");alert(a.item(0).text)}}}function t(){r.open()}function a(){r.close()}Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js"),theme("white");var r=Ti.UI.createWindow({backgroundColor:"pink",left:"51%"});r.backgroundColor=Ti.App.backgroundColor,Ti.App.theMessage;var i=Ti.UI.createTextField({hintText:"Enter phone number",color:"black",top:"13%",width:"80%",height:"30%",font:{fontSize:24,fontWeight:"bold"},backgroundColor:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER}),o=Ti.UI.createButton({title:"Compose",top:"65%",left:"10%",width:"35%",bottom:"10%"}),n=Ti.UI.createButton({title:"Send",top:"65%",right:"10%",width:"35%",bottom:"10%"}),s=Ti.UI.createTableView({data:getContacts(),backgroundColor:"transparent",separatorColor:Ti.App.backgroundColor,color:"black"});i.addEventListener("click",function(){i.blur(),i.keyboardType=Ti.UI.KEYBOARD_PHONE_PAD,i.focus()}),s.addEventListener("click",function(e){var t=e.rowData.msisdn;Ti.API.info(t),i.setValue(t)}),n.addEventListener("click",function(){""==i.getValue()?alert("Select a phone number first"):(e(Ti.App.Session,"en",i.getValue(),Ti.App.theMessage,1),Ti.API.info(Ti.App.theMessage),Ti.App.theMessage="",Ti.App.freeSMS>0&&Ti.App.freeSMS--)}),o.addEventListener("click",function(){var e=Ti.UI.create2DMatrix();e=e.scale(0);var t=Ti.UI.createWindow({backgroundColor:Ti.App.backgroundColor,borderWidth:8,borderColor:Ti.App.foregroundColor,height:"89%",width:"93%",borderRadius:10,opacity:.7,transform:e}),a=Ti.UI.create2DMatrix();a=a.scale(1.1);var r=Ti.UI.createAnimation();r.transform=a,r.duration=200,r.addEventListener("complete",function(){Ti.API.info("here in complete");var e=Ti.UI.create2DMatrix();e=e.scale(1),t.animate({transform:e,duration:200})});var i=Ti.UI.createButton({title:"Done",height:"7%",width:"50%",bottom:"8%"});t.add(i),i.addEventListener("click",function(){Ti.App.theMessage=messageField.getValue();var e=Ti.UI.create2DMatrix();e=e.scale(0),t.close({transform:e,duration:300})}),messageField=Ti.UI.createTextArea({top:"5%",left:"5%",right:"5%",bottom:"18%",editable:!0,hintText:"Enter your message",font:{fontSize:18},backgroundColor:"white",value:Ti.App.theMessage}),t.add(messageField),t.open(r),messageField.keyboardType=Ti.UI.KEYBOARD_ASCII,messageField.appearance=Ti.UI.KEYBOARD_APPEARANCE_ALERT,messageField.enableReturnKey=!1,messageField.returnKeyType=Ti.UI.RETURNKEY_DONE,messageField.focus(),messageField.addEventListener("swipe",function(e){"down"==e.direction?messageField.blur():"up"==e.direction&&messageField.focus()})});var l=Ti.UI.createScrollView({backgroundColor:Ti.UI.backgroundColor,top:0,horizontalBounce:!1,horizontalWrap:!1}),c=Ti.UI.createView({height:"100.5%",backgroundImage:Ti.Filesystem.resourcesDirectory+"/images/common/background.png"}),d=Ti.UI.createView({height:"70%",top:"-70%",backgroundColor:Ti.UI.backgroundColor}),u=Ti.UI.createActivityIndicator({color:"white",font:{fontFamily:"Helvetica Neue",fontSize:26,fontWeight:"bold"},message:"Updating...",style:Ti.UI.iPhone.ActivityIndicatorStyle.DARK,bottom:10});u.show();var h=Ti.UI.createView({height:Ti.UI.SIZE,layout:"vertical",backgroundColor:"transparent",top:"3%"}),p=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4});headerViewWrapper=Ti.UI.createView({backgroundColor:"transparent",height:"51.5%",left:"3%",right:"3%",borderRadius:10});var g=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4}),m=Ti.UI.createView({backgroundColor:"transparent",top:"5%",left:"3%",right:"3%",bottom:"5%",borderRadius:10,opacity:.4});return phoneSwipeWindow(r),closeMenu(r),c.add(h),headerViewWrapper.add(p),m.add(g),headerViewWrapper.add(i),headerViewWrapper.add(n),headerViewWrapper.add(o),m.add(s),h.add(headerViewWrapper),h.add(m),r.add(l),l.add(c),l.add(d),d.add(u),r.openWin=t,r.close=a,r}exports.open=open;