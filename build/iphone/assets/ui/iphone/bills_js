function open(){function e(){g.setText(lastPaymentText);var e=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",title:amountText,height:40});m.setText("$67.65"),e.add(m),l.push(e);var e=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",title:dateText,height:40,width:"70%"});f.setText("15/6/13"),e.add(f),l.push(e),T.setData(l),l=[]}function t(){b.setText(currentBalanceText);var e=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",title:totalDueText,height:40});v.setText("..."),"test"!=Ti.App.firstName&&i(Ti.App.Session,"en",1),e.add(v),l.push(e);var e=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",title:paymentDueDateText,height:40});y.setText("17/8/13"),e.add(y),l.push(e),w.setData(l),l=[]}function a(){var e=[{hasDetail:!0,title:viewAsPdfText,url:"pdfPrint.js"}];x.setData(e)}function r(){"pt"==Ti.App.Language?(amountText="quantidade",dateText="data",lastPaymentText="último pagamento",currentBalanceText="saldo atual",totalDueText="total devido",paymentDueDateText="data de vencimento",viewAsPdfText="ver em pdf",viewAllDocumentsText="ver todos os documentos"):"fr"==Ti.App.Language?(amountText="chamadas: ",dateText="dados: ",lastPaymentText="tempo de sobra: ",currentBalanceText="solde courant",totalDueText="total dû",paymentDueDateText="paiement date d'échéance",viewAsPdfText="Afficher au format PDF",viewAllDocumentsText="Voir tous les documents"):(amountText="Amount",dateText="Date",lastPaymentText="Last Payment",currentBalanceText="Current Balance",totalDueText="Total Due",paymentDueDateText="Payment Due Date",viewAsPdfText="View as PDF",viewAllDocumentsText="View All Documents")}function i(e,t,a){var r=Ti.Network.createHTTPClient();r.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var i=[{SessionID:e,LanguageCode:t,VirtualNetwork:a}],o=generateXML("http://service.adminportal.vasx.com/","getAgingData",i);r.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),r.setRequestHeader("Content-Type","text/xml"),r.setRequestHeader("Content-Length",o.length),r.setRequestHeader("SOAPAction",'"getAgingData"'),r.send(o),r.onload=function(){var e=r.responseXML.documentElement.getElementsByTagName("getAgingDataResponse");if(Ti.API.info(e.item(0).text),e&&e.length>0){var t=Ti.XML.parseString(e.item(0).text);t.getElementsByTagName("Message");var a=t.getElementsByTagName("CurrentBalance");v.setText("$"+a.item(0).text)}}}function o(){s.open()}function n(){s.close()}Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js");var s=Ti.UI.createWindow({backgroundColor:"pink",left:"51%"});r(),theme("white");var l=[],c=Ti.UI.createScrollView({backgroundColor:Ti.App.backgroundColor,top:0,horizontalBounce:!1,horizontalWrap:!1}),d=Ti.UI.createView({height:"100.5%",backgroundImage:Ti.Filesystem.resourcesDirectory+"/images/common/background.png"}),u=Ti.UI.createView({height:"70%",top:"-70%",backgroundColor:Ti.UI.backgroundColor}),h=Ti.UI.createActivityIndicator({color:"white",font:{fontFamily:"Helvetica Neue",fontSize:26,fontWeight:"bold"},message:"Updating...",style:Ti.UI.iPhone.ActivityIndicatorStyle.DARK,bottom:10});h.show();var p=Ti.UI.createButton({title:"Log out",style:Ti.UI.iPhone.SystemButtonStyle.BORDERED}),g=Ti.UI.createLabel({text:lastPaymentText,top:"15%"}),m=Ti.UI.createLabel({font:{fontSize:22,fontWeight:"bold"},right:15,color:Ti.App.foregroundColor}),f=Ti.UI.createLabel({font:{fontSize:24,fontWeight:"bold"},right:15,color:Ti.App.foregroundColor}),T=Ti.UI.createTableView({data:l,backgroundColor:"transparent",scrollable:!1,allowsSelection:!1,separatorColor:Ti.App.foregroundColor}),v=Ti.UI.createLabel({font:{fontSize:24,fontWeight:"bold"},right:15,color:Ti.App.foregroundColor}),b=Ti.UI.createLabel({text:currentBalanceText,top:"15%"}),y=Ti.UI.createLabel({text:"...",font:{fontSize:24,fontWeight:"bold"},right:15,color:Ti.App.foregroundColor}),w=Ti.UI.createTableView({data:l,backgroundColor:"transparent",scrollable:!1,allowsSelection:!1,separatorColor:Ti.App.foregroundColor}),x=Ti.UI.createTableView({backgroundColor:"transparent",scrollable:!1,allowsSelection:!0,separatorColor:Ti.App.foregroundColor});x.addEventListener("click",function(e){if(e.rowData.url)var t=Ti.UI.createWindow({backgroundColor:"#fff",title:e.rowData.title,url:e.rowData.url,id:s.id});Ti.UI.currentTab.open(t)}),r(),a(),t(),e(),p.addEventListener("click",function(){endSession()});var C=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4});theViewWrapper=Ti.UI.createView({backgroundColor:"transparent",height:"17%",left:"3%",right:"3%",top:"13%"});var R=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4});titleViewWrapper=Ti.UI.createView({backgroundColor:"transparent",height:"10%",left:"3%",right:"3%",top:"3%"});var I=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4}),_=Ti.UI.createView({backgroundColor:"transparent",height:"10%",left:"3%",right:"3%",top:"33%"}),A=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4}),E=Ti.UI.createView({backgroundColor:"transparent",height:"9.2%",left:"3%",right:"3%",top:"62.5%"}),k=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,opacity:.4}),S=Ti.UI.createView({backgroundColor:"transparent",height:"17%",left:"3%",right:"3%",top:"42.5%"}),U=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"6%",width:"100%",bottom:"0%"}),L=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"6%",width:"100%",bottom:"0%"});return closeMenu(s),phoneSwipeWindow(s),d.add(E),E.add(A),E.add(x),d.add(S),S.add(k),S.add(w),d.add(_),_.add(I),_.add(L),_.add(b),d.add(titleViewWrapper),titleViewWrapper.add(R),titleViewWrapper.add(U),titleViewWrapper.add(g),d.add(theViewWrapper),theViewWrapper.add(C),theViewWrapper.add(T),s.add(c),c.add(d),c.add(u),u.add(h),s.openWin=o,s.close=n,s}exports.open=open;