function open(){function e(e,t,a){function i(e,t,a,i,l,c){var d=Ti.Network.createHTTPClient();d.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var u=[{SessionID:e,LanguageCode:t,Msisdn:a,VirtualNetwork:i}],h=generateXML("http://service.adminportal.vasx.com/","getServices",u);d.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),d.setRequestHeader("Content-Type","text/xml"),d.setRequestHeader("Content-Length",h.length),d.setRequestHeader("SOAPAction",'"getServices"'),d.send(h),d.onload=function(){var e=d.responseXML.documentElement.getElementsByTagName("getServicesResponse");if(e&&e.length>0){Ti.API.info(e.item(0).text);var t=Ti.XML.parseString(e.item(0).text),a=t.getElementsByTagName("ServiceCode").item(0).text,i=t.getElementsByTagName("ServiceID").item(0).text,u=t.getElementsByTagName("ServiceName").item(0).text,h=t.getElementsByTagName("ActiveService").item(0).text,p=t.getElementsByTagName("ActiveFrom").item(0).text,g=t.getElementsByTagName("Administerable").item(0).text,m=t.getElementsByTagName("SubscriptionCharge").item(0).text;l.push(u),c.push("ServiceName: "),l.push(a),c.push("Code: "),l.push(i),c.push("ID: "),l.push(h),c.push("Active: "),l.push(p),c.push("Active from: "),l.push(g),c.push("Administerable: "),l.push(m),c.push("Subscription charge: ");for(var f=[],T=0;l.length>T;T++){var v=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",height:40}),b=Ti.UI.createLabel({text:c[T],color:"black",font:{fontSize:"12pt",fontWeight:"bold"},left:"2%",right:"2%"}),y=Ti.UI.createLabel({text:l[T],font:{fontSize:"14pt",fontWeight:"bold"},right:"2%",width:"60%",color:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT});v.add(b),v.add(y),f.push(v)}var w=Ti.UI.createTableView({backgroundColor:"transparent",data:f,separatorColor:Ti.App.backgroundColor});r.add(n),n.add(o),n.add(w),s.setVisible(!1)}}}var l=Ti.Network.createHTTPClient();l.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var c=[{SessionID:e,LanguageCode:t,VirtualNetwork:a}],d=generateXML("http://service.adminportal.vasx.com/","getAccountData",c);l.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),l.setRequestHeader("Content-Type","text/xml"),l.setRequestHeader("Content-Length",d.length),l.setRequestHeader("SOAPAction",'"getAccountData"'),l.send(d),l.onload=function(){var r=l.responseXML.documentElement.getElementsByTagName("getAccountDataResponse");if(Ti.API.info(r.item(0).text),r&&r.length>0){var o=[],n=[],s=Ti.XML.parseString(r.item(0).text);s.getElementsByTagName("Message");var c=s.getElementsByTagName("AccountNumber"),d=s.getElementsByTagName("AccountName"),u=s.getElementsByTagName("EmailAddress"),h=s.getElementsByTagName("Line1"),p=s.getElementsByTagName("Line2"),g=s.getElementsByTagName("Line3"),m=s.getElementsByTagName("Line4"),f=s.getElementsByTagName("Line5");o.push(c.item(0).text),n.push("Account Number: "),o.push(d.item(0).text),n.push("Account Name: "),""!=u.item(0).text&&(o.push(u.item(0).text),n.push("Email Address: ")),n.push("Address:"),o.push(h.item(0).text),""!=p.item(0).text&&(o.push(p.item(0).text),n.push("")),""!=g.item(0).text&&(o.push(g.item(0).text),n.push("")),""!=m.item(0).text&&(o.push(m.item(0).text),n.push("")),""!=f.item(0).text&&(o.push(f.item(0).text),n.push("")),i(e,t,Ti.App.msisdn,a,o,n)}}}function t(){r.open()}function a(){r.close()}Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js");var r=Ti.UI.createWindow({backgroundColor:"pink",left:"51%",backgroundImage:Ti.Filesystem.resourcesDirectory+"/images/common/background.png"});theme("white"),r.backgroundColor=Ti.App.backgroundColor;var i,o=Ti.UI.createView({backgroundColor:"white",opacity:.4}),n=Ti.UI.createView({backgroundColor:"transparent",left:"3%",right:"3%",top:"3%",bottom:"3%",borderRadius:10});i="iPhone OS"===Ti.Platform.name?Ti.UI.iPhone.ActivityIndicatorStyle.DARK:Ti.UI.ActivityIndicatorStyle.DARK;var s=Ti.UI.createActivityIndicator({color:Ti.App.foregroundColor,font:{fontFamily:"Helvetica Neue",fontSize:26,fontWeight:"bold"},message:"Loading...",style:i,height:Ti.UI.SIZE,width:Ti.UI.SIZE,visible:!1});return r.addEventListener("focus",function(){s.setVisible(!0)}),e(Ti.App.Session,"en",1),closeMenu(r),phoneSwipeWindow(r),r.add(s),r.openWin=t,r.close=a,r}exports.open=open;