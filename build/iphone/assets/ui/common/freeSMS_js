function sendSMS(e,t,a,r,i){var n=Ti.Network.createHTTPClient();n.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var o=[{SessionID:e,LanguageCode:t,Recipient:a,Message:r,VirtualNetwork:i}],s=generateXML("http://service.adminportal.vasx.com/","sendSMS",o);n.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),n.setRequestHeader("Content-Type","text/xml"),n.setRequestHeader("Content-Length",s.length),n.setRequestHeader("SOAPAction",'"sendSMS"'),n.send(s),n.onload=function(){var e=n.responseXML.documentElement.getElementsByTagName("sendSMSResponse");if(Ti.API.info(e.item(0).text),e&&e.length>0){var t=Ti.XML.parseString(e.item(0).text),a=t.getElementsByTagName("Message");alert(a.item(0).text)}}}var win=Ti.UI.currentWindow;Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js"),theme("red"),win.backgroundColor=Ti.App.backgroundColor,Ti.App.theMessage;var textField=Ti.UI.createTextField({hintText:"Enter phone number",color:"black",top:"13%",width:"80%",height:"30%",font:{fontSize:24,fontWeight:"bold"},backgroundColor:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER}),messageButton=Ti.UI.createButton({title:"Compose",top:"65%",left:"10%",width:"35%",bottom:"10%"}),callButton=Ti.UI.createButton({title:"Send",top:"65%",right:"10%",width:"35%",bottom:"10%"}),table=Ti.UI.createTableView({data:getContacts(),backgroundColor:"transparent",separatorColor:Ti.App.backgroundColor});textField.addEventListener("click",function(){textField.blur(),textField.keyboardType=Ti.UI.KEYBOARD_PHONE_PAD,textField.focus()}),table.addEventListener("click",function(e){var t=e.rowData.msisdn;Ti.API.info(t),textField.setValue(t)}),callButton.addEventListener("click",function(){""==textField.getValue()?alert("Select a phone number first"):(sendSMS(win.id,"en",textField.getValue(),Ti.App.theMessage,1),Ti.API.info(Ti.App.theMessage),Ti.App.theMessage="",Ti.App.freeSMS>0&&Ti.App.freeSMS--)}),messageButton.addEventListener("click",function(){var e=Ti.UI.create2DMatrix();e=e.scale(0);var t=Ti.UI.createWindow({backgroundColor:Ti.App.backgroundColor,borderWidth:8,borderColor:Ti.App.foregroundColor,height:"89%",width:"93%",borderRadius:10,opacity:.7,transform:e}),a=Ti.UI.create2DMatrix();a=a.scale(1.1);var r=Ti.UI.createAnimation();r.transform=a,r.duration=200,r.addEventListener("complete",function(){Ti.API.info("here in complete");var e=Ti.UI.create2DMatrix();e=e.scale(1),t.animate({transform:e,duration:200})});var i=Ti.UI.createButton({title:"Done",height:"7%",width:"50%",bottom:"8%"});t.add(i),i.addEventListener("click",function(){Ti.App.theMessage=messageField.getValue();var e=Ti.UI.create2DMatrix();e=e.scale(0),t.close({transform:e,duration:300})}),messageField=Ti.UI.createTextArea({top:"5%",left:"5%",right:"5%",bottom:"18%",editable:!0,hintText:"Enter your message",font:{fontSize:18},backgroundColor:"white",value:Ti.App.theMessage}),t.add(messageField),t.open(r),messageField.keyboardType=Ti.UI.KEYBOARD_ASCII,messageField.appearance=Ti.UI.KEYBOARD_APPEARANCE_ALERT,messageField.enableReturnKey=!1,messageField.returnKeyType=Ti.UI.RETURNKEY_DONE,messageField.focus(),messageField.addEventListener("swipe",function(e){"down"==e.direction?messageField.blur():"up"==e.direction&&messageField.focus()})});var header=Ti.UI.createView({height:Ti.UI.SIZE,layout:"vertical",backgroundColor:Ti.App.backgroundColor,top:"3%"}),headerView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"51.5%",left:"3%",right:"3%",borderRadius:10});headerView.addEventListener("swipe",function(e){"down"==e.direction?textField.blur():"up"==e.direction&&textField.focus()});var bottomView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,top:"5%",left:"3%",right:"3%",bottom:"5%",borderRadius:10});headerView.add(textField),win.add(header),header.add(headerView),header.add(bottomView),headerView.add(callButton),headerView.add(messageButton),bottomView.add(table);