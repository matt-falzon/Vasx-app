function popUp(e){var t=Ti.UI.create2DMatrix();if(t=t.scale(0),e.getText()==passwordLabel.getText())var a=Ti.UI.createWindow({backgroundColor:"#336699",borderWidth:8,borderColor:"#999",height:"50%",width:"70%",top:"15%",borderRadius:10,opacity:.92,transform:t});else var a=Ti.UI.createWindow({backgroundColor:"#336699",borderWidth:8,borderColor:"#999",height:"25%",width:"70%",top:"25%",borderRadius:10,opacity:.92,transform:t});var r=Ti.UI.create2DMatrix();r=r.scale(1.1);var i=Ti.UI.createAnimation();if(i.transform=r,i.duration=200,i.addEventListener("complete",function(){Ti.API.info("here in complete");var e=Ti.UI.create2DMatrix();e=e.scale(1),a.animate({transform:e,duration:200})}),e.getText()==passwordLabel.getText())var n=Ti.UI.createButton({title:"Done",height:"10%",width:"35%",bottom:"5%"});else var n=Ti.UI.createButton({title:"Done",height:"20%",width:"50%",bottom:"8%"});a.add(n),n.addEventListener("click",function(){e.getText()==passwordLabel.getText()&&(messageField.getValue().length>0&&newPassword.getValue().length>0&&newPasswordConfirm.getValue().length>0?newPasswordConfirm.getValue()==newPassword.getValue()?setPassword(myId,Ti.App.Language,messageField.getValue(),newPassword.getValue(),1):alert("New passwords do not match"):alert("Fill all fields")),e.setText(messageField.getValue());var t=Ti.UI.create2DMatrix();t=t.scale(0),a.close({transform:t,duration:300})});var o=e.getText();o.indexOf(":")>=0&&(o=o.substring(o.length,o.indexOf(":")),o=o.substr(2)),e.getText()==passwordLabel.getText()?(messageField=Ti.UI.createTextField({top:"10%",left:"5%",right:"5%",height:"20%",editable:!0,hintText:"Enter old Password",font:{fontSize:18},backgroundColor:"white",autocorrect:!1}),newPassword=Ti.UI.createTextField({top:"35%",left:"5%",right:"5%",height:"20%",editable:!0,hintText:"Enter new password",font:{fontSize:18},backgroundColor:"white",autocorrect:!1}),newPasswordConfirm=Ti.UI.createTextField({top:"60%",left:"5%",right:"5%",height:"20%",editable:!0,hintText:"Confirm New Password",font:{fontSize:18},backgroundColor:"white",autocorrect:!1}),a.add(messageField),a.add(newPassword),a.add(newPasswordConfirm)):(messageField=Ti.UI.createTextField({top:"35%",left:"5%",right:"5%",bottom:"35%",editable:!0,hintText:"Enter your message",font:{fontSize:18},backgroundColor:"white",autocorrect:!1,value:o}),a.add(messageField)),a.open(i),e.getText()==passwordLabel.getText()?(messageField.keyboardType=Ti.UI.KEYBOARD_ASCII,messageField.appearance=Ti.UI.KEYBOARD_APPEARANCE_ALERT,messageField.enableReturnKey=!1,messageField.returnKeyType=Ti.UI.RETURNKEY_DONE,newPassword.keyboardType=Ti.UI.KEYBOARD_ASCII,newPassword.appearance=Ti.UI.KEYBOARD_APPEARANCE_ALERT,newPassword.enableReturnKey=!1,newPassword.returnKeyType=Ti.UI.RETURNKEY_DONE,newPasswordConfirm.keyboardType=Ti.UI.KEYBOARD_ASCII,newPasswordConfirm.appearance=Ti.UI.KEYBOARD_APPEARANCE_ALERT,newPasswordConfirm.enableReturnKey=!1,newPasswordConfirm.returnKeyType=Ti.UI.RETURNKEY_DONE):(messageField.keyboardType=Ti.UI.KEYBOARD_ASCII,messageField.appearance=Ti.UI.KEYBOARD_APPEARANCE_ALERT,messageField.enableReturnKey=!1,messageField.returnKeyType=Ti.UI.RETURNKEY_DONE,messageField.focus()),messageField.addEventListener("swipe",function(e){"down"==e.direction?(messageField.blur(),newPassword.blur(),newPasswordConfirm.blur()):"up"==e.direction&&(messageField.focus(),newPassword.focus(),newPasswordConfirm.focus())}),a.addEventListener("swipe",function(e){"down"==e.direction?(messageField.blur(),newPassword.blur(),newPasswordConfirm.blur()):"up"==e.direction&&(messageField.focus(),newPassword.focus(),newPasswordConfirm.focus())})}function setPassword(e,t,a,r,i){var n=Ti.Network.createHTTPClient();params=[{SessionID:e,LanguageCode:t,OldPassword:a,NewPassword:r,VirtualNetwork:i}];var o=generateXML("http://service.adminportal.vasx.com/","setPassword",params);n.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),n.setRequestHeader("Content-Type","text/xml"),n.setRequestHeader("Content-Length",o.length),n.setRequestHeader("SOAPAction",'"setPassword"'),n.send(o),n.onload=function(){var e=n.responseXML.documentElement.getElementsByTagName("setPasswordResponse"),t=Ti.XML.parseString(e.item(0).text),a=t.getElementsByTagName("Message");alert(a.item(0).text)},n.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)}}function getPasswordHints(e,t,a){var r=Ti.Network.createHTTPClient();params=[{SessionID:e,LanguageCode:t,OldPassword:oldPass,NewPassword:newPass,VirtualNetwork:a}];var i=generateXML("http://service.adminportal.vasx.com/","getPasswordHints",params);r.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),r.setRequestHeader("Content-Type","text/xml"),r.setRequestHeader("Content-Length",i.length),r.setRequestHeader("SOAPAction",'"getPasswordHints"'),r.send(i),r.onload=function(){var e=r.responseXML.documentElement.getElementsByTagName("getPasswordHintsResponse"),t=Ti.XML.parseString(e.item(0).text),a=t.getElementsByTagName("Message");alert(a.item(0).text)},r.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)}}var win=Ti.UI.currentWindow;Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js"),theme("orange"),win.backgroundColor=Ti.App.backgroundColor,myId=win.myId,firstNameLabel=Ti.UI.createLabel({text:"First Name: "+win.firstName}),surnameLabel=Ti.UI.createLabel({text:"Surname: "+win.lastName}),passwordLabel=Ti.UI.createLabel({text:"Change Password"}),contactNo1Label=Ti.UI.createLabel({text:"First contact number: 0424 837 502"}),contactNo2Label=Ti.UI.createLabel({text:"Second contact number: 0421 827 146"}),addressLabel=Ti.UI.createLabel({text:"Change Address"});var firstNameView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"9%",left:"3%",right:"3%",top:"3%",borderRadius:10}),surnameView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"9%",left:"3%",right:"3%",top:"15%",borderRadius:10}),addressView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"9%",left:"3%",right:"3%",top:"27%",borderRadius:10}),passwordView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"9%",left:"3%",right:"3%",top:"39%",borderRadius:10}),contactNo1View=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"9%",left:"3%",right:"3%",top:"51%",borderRadius:10}),contactNo2View=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"9%",left:"3%",right:"3%",top:"63%",borderRadius:10});firstNameView.addEventListener("click",function(){popUp(firstNameLabel)}),surnameView.addEventListener("click",function(){popUp(surnameLabel)}),passwordView.addEventListener("click",function(){popUp(passwordLabel)}),contactNo1View.addEventListener("click",function(){popUp(contactNo1Label)}),contactNo2View.addEventListener("click",function(){popUp(contactNo2Label)}),addressView.addEventListener("click",function(){popUp(addressLabel)}),firstNameView.add(firstNameLabel),surnameView.add(surnameLabel),passwordView.add(passwordLabel),contactNo1View.add(contactNo1Label),contactNo2View.add(contactNo2Label),addressView.add(addressLabel),win.add(firstNameView),win.add(surnameView),win.add(passwordView),win.add(contactNo1View),win.add(contactNo2View),win.add(addressView);