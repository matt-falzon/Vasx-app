function getDisplayNames(e,t,a){var r=Ti.Network.createHTTPClient();r.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var i=[{SessionID:e,LanguageCode:t,VirtualNetwork:a}],n=generateXML("http://service.adminportal.vasx.com/","getDisplayNames",i);r.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),r.setRequestHeader("Content-Type","text/xml"),r.setRequestHeader("Content-Length",n.length),r.setRequestHeader("SOAPAction",'"getDisplayNames"'),r.send(n),r.onload=function(){var e=[],t=r.responseXML.documentElement.getElementsByTagName("getDisplayNamesResponse");if(Ti.API.info(t.item(0).text),t&&t.length>0){for(var a=Ti.XML.parseString(t.item(0).text),i=a.getElementsByTagName("Name"),n=0;i.length>n;n++)for(var o=0;i.item(n).getElementsByTagName("DisplayName").length>o;o++){var s=i.item(n).getElementsByTagName("DisplayName").item(o).text,l=i.item(n).getElementsByTagName("OtherParty").item(o).text;e.push({name:s,number:l})}for(var c=[],n=0;e.length>n;n++){var h=Ti.UI.createTableViewRow({selectedBackgroundColor:"transparent",height:40}),d=Ti.UI.createLabel({text:e[n].name+": "+e[n].number,color:"black",font:{fontSize:"16pt",fontWeight:"bold"},left:"2%",right:"2%"});h.add(d),c.push(h)}table.setData(c)}}}function setDisplayName(e,t,a,r,i){var n=Ti.Network.createHTTPClient();n.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var o=[{SessionID:e,LanguageCode:t,CalledNumber:a,DisplayName:r,VirtualNetwork:i}],s=generateXML("http://service.adminportal.vasx.com/","setDisplayName",o);n.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),n.setRequestHeader("Content-Type","text/xml"),n.setRequestHeader("Content-Length",s.length),n.setRequestHeader("SOAPAction",'"setDisplayName"'),n.send(s),n.onload=function(){var e=n.responseXML.documentElement.getElementsByTagName("setDisplayNameResponse");if(e&&e.length>0){Ti.API.info(e.item(0).text);var t=Ti.XML.parseString(e.item(0).text);alert(t.getElementsByTagName("Message").item(0).text)}}}var win=Ti.UI.currentWindow;Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js"),theme("red"),win.backgroundColor=Ti.App.backgroundColor,getDisplayNames(win.myId,Ti.App.Language,1);var msisdnField=Ti.UI.createTextField({hintText:"Enter phone number",color:"black",top:"13%",width:"80%",height:"20%",font:{fontSize:24,fontWeight:"bold"},backgroundColor:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER}),nameField=Ti.UI.createTextField({hintText:"Enter name",color:"black",top:"40%",width:"80%",height:"20%",font:{fontSize:24,fontWeight:"bold"},backgroundColor:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,autocorrect:!1}),table=Ti.UI.createTableView({backgroundColor:"transparent",separatorColor:Ti.App.backgroundColor}),addButton=Ti.UI.createButton({title:"Add",top:"70%",width:"35%",bottom:"10%"}),tableView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,top:"51.5%",left:"3%",right:"3%",bottom:"3%",borderRadius:10}),topView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"45.5%",left:"3%",right:"3%",top:"3%",borderRadius:10});addButton.addEventListener("click",function(){setDisplayName(win.myId,Ti.App.Language,msisdnField.getValue(),nameField.getValue(),1),getDisplayNames(win.myId,Ti.App.Language,1)}),msisdnField.addEventListener("click",function(){msisdnField.blur(),msisdnField.keyboardType=Ti.UI.KEYBOARD_PHONE_PAD,msisdnField.focus()}),topView.add(nameField),topView.add(msisdnField),win.add(topView),win.add(tableView),topView.add(addButton),tableView.add(table);