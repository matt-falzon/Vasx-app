function usageLanguage(){"pt"==Ti.App.Language?(callsLabel.setText("chamadas "),dataLabel.setText("dados "),timeLabel.setText("tempo de sobra "),freeSMSLabel.setText("sms grátis utilizados ")):"fr"==Ti.App.Language?(callsLabel.setText("appels "),dataLabel.setText("données "),timeLabel.setText("mise à niveau de téléphone "),freeSMSLabel.setText("SMS gratuits utilisés")):(callsLabel.setText("Calls "),dataLabel.setText("Data "),timeLabel.setText("Time Left "),freeSMSLabel.setText("Free SMS used "))}function setBarWidth(e,t,a,r){a=100*(a/r),40>=a?(e.setBackgroundColor("#00FF15"),t.setBackgroundColor("#00E813")):75>=a&&a>40?(e.setBackgroundColor("#FFAA17"),t.setBackgroundColor("#E69A17")):(e.setBackgroundColor("#FF0000"),t.setBackgroundColor("#DE0202")),e.setWidth(a+"%"),t.setWidth(a+"%")}function getUsage(){var e=Ti.Network.createHTTPClient();e.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var t=[{SessionID:sid,LanguageCode:lang,VirtualNetwork:vn}],a=generateXML("http://service.adminportal.vasx.com/","getUsage",t);e.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),e.setRequestHeader("Content-Type","text/xml"),e.setRequestHeader("Content-Length",a.length),e.setRequestHeader("SOAPAction",'"getUsage"'),e.send(a),e.onload=function(){var t=e.responseXML.documentElement.getElementsByTagName("getUsageResponse");Ti.API.info(t.item(0).text)}}function getCalls(){var e=Ti.Network.createHTTPClient();e.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var t=[{SessionID:sid,LanguageCode:lang,VirtualNetwork:vn}],a=generateXML("http://service.adminportal.vasx.com/","getCalls",t);e.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),e.setRequestHeader("Content-Type","text/xml"),e.setRequestHeader("Content-Length",a.length),e.setRequestHeader("SOAPAction",'"getCalls"'),e.send(a),e.onload=function(){var t=e.responseXML.documentElement.getElementsByTagName("getCallsResponse");Ti.API.info(t.item(0).text)}}function timeLeft(){var e=Ti.Network.createHTTPClient();e.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var t=[{SessionID:sid,LanguageCode:lang,VirtualNetwork:vn}],a=generateXML("http://service.adminportal.vasx.com/","timeLeft",t);e.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),e.setRequestHeader("Content-Type","text/xml"),e.setRequestHeader("Content-Length",a.length),e.setRequestHeader("SOAPAction",'"timeLeft"'),e.send(a),e.onload=function(){var t=e.responseXML.documentElement.getElementsByTagName("timeLeftResponse");Ti.API.info(t.item(0).text)}}var win=Ti.UI.currentWindow,myId=win.id;Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js"),theme("blue"),win.backgroundColor=Ti.App.backgroundColor;var myTabGroup=Ti.UI.currentWindow.tabGroup,mainView=Ti.UI.createView({backgroundColor:Ti.App.backgroundColor}),callsText,dataText,timeText,upgradeText,logout=Ti.UI.createButton({title:"Log out",style:Ti.UI.iPhone.SystemButtonStyle.BORDERED});logout.addEventListener("click",function(){endSession()}),win.addEventListener("focus",function(){setBarWidth(dataBarTop,dataBarBottom,242,1024),setBarWidth(callsBarTop,callsBarBottom,321,600),setBarWidth(timeBarTop,timeBarBottom,27,31),setBarWidth(freeSMSBarTop,freeSMSBarBottom,5-Ti.App.freeSMS,5),freeSMSUsageLabel.setText(5-Ti.App.freeSMS+"/5"),usageLanguage()});var callsView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"22%",left:"3%",right:"3%",top:"2.5%",borderRadius:10}),callsBarView=Ti.UI.createView({height:"32%%",backgroundColor:"#C6CCCC",left:"6%",right:"6%",top:"35%",borderWidth:1,borderColor:"#8C8C8C"}),callsBarTop=Ti.UI.createView({backgroundColor:"#FF0000",left:"1.5%",top:"12%",bottom:"50%"}),callsBarBottom=Ti.UI.createView({backgroundColor:"#FF0000",left:"1.5%",top:"50%",bottom:"12%"});callsLabel=Ti.UI.createLabel({text:"Calls",top:"8%",left:"6%",font:{fontSize:"20sp",fontWeight:"bold",fontColor:"#1BA5E0"},color:Ti.App.backgroundColor}),callsUsageLabel=Ti.UI.createLabel({text:"321/600",bottom:"8.5%",right:"4.5%",font:{fontSize:"18sp",fontColor:"#1BA5E0"},color:Ti.App.backgroundColor});var dataView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"22%",left:"3%",right:"3%",borderRadius:10,top:"27%"}),dataBarView=Ti.UI.createView({height:"32%%",backgroundColor:"#C6CCCC",left:"6%",right:"6%",top:"35%",borderWidth:1,borderColor:"#8C8C8C"}),dataBarTop=Ti.UI.createView({backgroundColor:"#FF0000",left:"1.5%",top:"12%",bottom:"50%"}),dataBarBottom=Ti.UI.createView({backgroundColor:"#FF0000",left:"1.5%",top:"50%",bottom:"12%"}),dataLabel=Ti.UI.createLabel({text:"Data",top:"8%",left:"6%",font:{fontSize:"20sp",fontWeight:"bold",fontColor:"#1BA5E0"},color:Ti.App.backgroundColor}),dataUsageLabel=Ti.UI.createLabel({text:"242/1024",bottom:"7%",right:"4.5%",font:{fontSize:"18sp",fontColor:"#1BA5E0"},color:Ti.App.backgroundColor}),timeView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"22%",left:"3%",right:"3%",borderRadius:10,top:"51.5%"}),timeBarView=Ti.UI.createView({height:"32%%",backgroundColor:"#C6CCCC",left:"6%",right:"6%",top:"35%",borderWidth:1,borderColor:"#8C8C8C"}),timeBarTop=Ti.UI.createView({backgroundColor:"#FF0000",left:"1.5%",top:"12%",bottom:"50%"}),timeBarBottom=Ti.UI.createView({backgroundColor:"#FF0000",left:"1.5%",top:"50%",bottom:"12%"}),timeLabel=Ti.UI.createLabel({text:"Time Left",top:"8%",left:"6%",font:{fontSize:"20sp",fontWeight:"bold",fontColor:"#1BA5E0"},color:Ti.App.backgroundColor}),timeUsageLabel=Ti.UI.createLabel({text:"27/30",bottom:"7%",right:"4.5%",font:{fontSize:"18sp",fontColor:"#1BA5E0"},color:Ti.App.backgroundColor}),freeSMSView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"22%",left:"3%",right:"3%",borderRadius:10,bottom:"2%"}),freeSMSBarView=Ti.UI.createView({height:"32%%",backgroundColor:"#C6CCCC",left:"6%",right:"6%",top:"35%",borderWidth:1,borderColor:"#8C8C8C"}),freeSMSBarTop=Ti.UI.createView({backgroundColor:"#FF0000",left:"1.5%",top:"12%",bottom:"50%"}),freeSMSBarBottom=Ti.UI.createView({backgroundColor:"#FF0000",left:"1.5%",top:"50%",bottom:"12%"}),freeSMSLabel=Ti.UI.createLabel({text:"Free SMS Used",top:"8%",left:"6%",font:{fontSize:"20sp",fontWeight:"bold",fontColor:"#1BA5E0"},color:Ti.App.backgroundColor}),freeSMSUsageLabel=Ti.UI.createLabel({text:5-Ti.App.freeSMS+"/5",bottom:"7%",right:"4.5%",font:{fontSize:"18sp",fontColor:"#1BA5E0"},color:Ti.App.backgroundColor});mainView.add(callsView),mainView.add(dataView),mainView.add(timeView),mainView.add(freeSMSView),dataView.add(dataBarView),dataBarView.add(dataBarTop),dataBarView.add(dataBarBottom),dataView.add(dataUsageLabel),dataView.add(dataLabel),callsView.add(callsBarView),callsBarView.add(callsBarBottom),callsBarView.add(callsBarTop),callsView.add(callsLabel),callsView.add(callsUsageLabel),timeView.add(timeBarView),timeBarView.add(timeBarTop),timeBarView.add(timeBarBottom),timeView.add(timeLabel),timeView.add(timeUsageLabel),freeSMSView.add(freeSMSBarView),freeSMSBarView.add(freeSMSBarTop),freeSMSBarView.add(freeSMSBarBottom),freeSMSView.add(freeSMSLabel),freeSMSView.add(freeSMSUsageLabel),win.setLeftNavButton(logout),win.add(mainView);