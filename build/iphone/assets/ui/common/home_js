function appLanguage(){"pt"==Ti.App.Language?(myPlanLabel.setText("meu Plano"),myPlanInfoLabel.setText("você é no a  myplan plano"),headerLabel.setText("boas-vindas "+firstName+"!"),tableData=[{hasDetail:!0,title:"Ver meu detalhes",url:"viewDetails.js",myId:myId},{hasDetail:!0,title:"Alterar meu detalhes",url:"changeDetails.js"},{hasDetail:!0,title:"grupos de contatos",url:"contactGroups.js",id:myId}],tableView.setData(tableData)):"fr"==Ti.App.Language?(myPlanLabel.setText("Mon plan"),myPlanInfoLabel.setText("vous êtes sur la  myplan plano"),headerLabel.setText("accueil "+firstName+"!"),tableData=[{hasDetail:!0,title:"Affichage de mes informations",url:"viewDetails.js",myId:myId},{hasDetail:!0,title:"changer mes informations",url:"changeDetails.js"},{hasDetail:!0,title:"groupes de contact",url:"contactGroups.js",id:myId}],tableView.setData(tableData)):"en"==Ti.App.Language&&(myPlanLabel.setText("My Plan"),myPlanInfoLabel.setText("You are on the myplan plan"),headerLabel.setText("Welcome "+firstName+"!"),tableData=[{hasDetail:!0,title:"View my details",url:"viewDetails.js",myId:myId},{hasDetail:!0,title:"Change my details",url:"changeDetails.js"},{hasDetail:!0,title:"Contact groups",url:"contactGroups.js",id:myId}],tableView.setData(tableData))}var win=Ti.UI.currentWindow,myTabGroup=Ti.UI.currentWindow.tabGroup;Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js"),Ti.App.Language,Ti.App.backgroundColor,Ti.App.foregroundColor,Ti.App.freeSMS=win.sms,Ti.App.Session=win.id,Ti.API.info("free sms: "+Ti.App.freeSMS),Ti.App.msisdn=win.msisdn,theme("orange");var myId=win.id;Ti.API.info("Your session ID is: "+myId),Ti.API.info("Your MSISDN is: "+Ti.App.msisdn);var firstName=win.firstName,surname=win.lastName;Ti.App.msisdn=win.msisdn,win.backgroundColor=Ti.App.backgroundColor;var db=Ti.Database.open("local"),c=db.execute("SELECT lang_name, lang_code FROM user_language where msisdn = ?",Ti.App.msisdn);Ti.API.info("Language: "+c.fieldByName("lang_name"));var lang=c.fieldByName("lang_code"),d=db.execute("SELECT country, site_name, url FROM data where msisdn = ?",Ti.App.msisdn);Ti.API.info("Country: "+d.fieldByName("country")),Ti.API.info("Site Name: "+d.fieldByName("site_name")),Ti.API.info("URL: "+d.fieldByName("url")),db.close(),Ti.App.Language="pt"==lang?"pt":"fr"==lang?"fr":"en";var tableContent=[{hasDetail:!0,title:"View my details",url:"viewDetails.js",myId:myId},{hasDetail:!0,title:"Change my details",url:"changeDetails.js"},{hasDetail:!0,title:"Contact groups",url:"contactGroups.js"}],tableView=Ti.UI.createTableView({data:tableContent,backgroundColor:"transparent",scrollable:!1,separatorColor:Ti.App.backgroundColor}),mainView=Ti.UI.createView({backgroundColor:Ti.App.backgroundColor}),topView=Ti.UI.createView({backgroundColor:Ti.App.backgroundColor,height:"21%",top:0}),headerView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"70%",left:"3%",right:"3%",top:"15%"}),middleView=Ti.UI.createView({top:"21%",backgroundColor:Ti.App.foregroundColor,height:"17%",left:"3%",right:"3%"}),bottomView=Ti.UI.createView({bottom:"24%",backgroundColor:Ti.App.foregroundColor,height:"35.5%",left:"3%",right:"3%"}),languageView=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"18%",left:"3%",right:"3%",bottom:"3%"}),enFlag=Ti.UI.createImageView({image:"/images/flags/enFlag.png",left:"15%",height:"40%",width:"18%"}),ptFlag=Ti.UI.createImageView({image:"/images/flags/portFlag.png",right:"15%",height:"40%",width:"18%"}),frFlag=Ti.UI.createImageView({image:"/images/flags/frFlag.png",height:"40%",width:"18%"}),headerLabel=Ti.UI.createLabel({color:"#000",top:"25%",textAlign:"center",height:"auto",text:"Welcome "+firstName+"!"}),myPlanLabel=Ti.UI.createLabel({font:{fontSize:"18sp",fontWeight:"bold"},text:"My Plan: ",height:"auto",width:"auto",top:"18%",left:"4.5%",color:Ti.App.backgroundColor}),myPlanInfoLabel=Ti.UI.createLabel({font:{fontSize:"14sp"},text:"You are on the myPlan plan",height:"auto",width:"auto",top:"50%",left:"4.5%",color:"#5A5D5E"}),logout=Ti.UI.createButton({title:"Log out",style:Ti.UI.iPhone.SystemButtonStyle.BORDERED});appLanguage(),logout.addEventListener("click",function(){endSession()}),tableView.addEventListener("click",function(e){if(e.rowData.url)var t=Ti.UI.createWindow({backgroundColor:"#fff",title:e.rowData.title,url:e.rowData.url,firstName:firstName,lastName:surname,myId:myId});Ti.UI.currentTab.open(t)}),enFlag.addEventListener("click",function(){alert("English"),Ti.App.Language="en",setLanguage(myId,Ti.App.Language,1),appLanguage();var e=Ti.Database.open("local");e.execute("DELETE FROM user_language WHERE msisdn =?",Ti.App.msisdn),e.execute("INSERT INTO user_language (msisdn, lang_code, lang_name) VALUES(?,?,?)",Ti.App.msisdn,"en","English"),e.close()}),ptFlag.addEventListener("click",function(){alert("Portuguese"),Ti.App.Language="pt",setLanguage(myId,Ti.App.Language,1),appLanguage();var e=Ti.Database.open("local");e.execute("DELETE FROM user_language WHERE msisdn =?",Ti.App.msisdn),e.execute("INSERT INTO user_language (msisdn, lang_code, lang_name) VALUES(?,?,?)",Ti.App.msisdn,"pt","Portuguese"),e.close()}),frFlag.addEventListener("click",function(){alert("French"),Ti.App.Language="fr",setLanguage(myId,Ti.App.Language,1),appLanguage();var e=Ti.Database.open("local");e.execute("DELETE FROM user_language WHERE msisdn =?",Ti.App.msisdn),e.execute("INSERT INTO user_language (msisdn, lang_code, lang_name) VALUES(?,?,?)",Ti.App.msisdn,"fr","French"),e.close()}),headerView.add(headerLabel),middleView.add(myPlanInfoLabel),middleView.add(myPlanLabel),topView.add(headerView),mainView.add(middleView),mainView.add(bottomView),mainView.add(languageView),bottomView.add(tableView),languageView.add(enFlag),languageView.add(ptFlag),languageView.add(frFlag),win.setLeftNavButton(logout),win.add(mainView),win.add(topView);