function open(e){function t(e,t,a,r,i){var o=Ti.Network.createHTTPClient();o.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var n=[{SessionID:e,LanguageCode:t,Recipient:a,Message:r,VirtualNetwork:i}],s=generateXML("http://service.adminportal.vasx.com/","sendSMS",n);o.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),o.setRequestHeader("Content-Type","text/xml"),o.setRequestHeader("Content-Length",s.length),o.setRequestHeader("SOAPAction",'"sendSMS"'),o.send(s),o.onload=function(){var e=o.responseXML.documentElement.getElementsByTagName("sendSMSResponse");if(Ti.API.info(e.item(0).text),e&&e.length>0){var t=Ti.XML.parseString(e.item(0).text),a=t.getElementsByTagName("Message");alert(a.item(0).text)}}}function a(){i.open()}function r(){i.close()}Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js"),theme("red");var i=Ti.UI.createWindow({backgroundColor:"pink",left:"15%"});i.backgroundColor=Ti.App.backgroundColor,Ti.App.theMessage;var o=Ti.UI.createTextField({hintText:"Enter phone number",color:"black",top:"5%",right:"20%",height:"12%",left:"12%",font:{fontSize:24,fontWeight:"bold"},backgroundColor:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,keyboardType:Ti.UI.KEYBOARD_PHONE_PAD}),n=Ti.UI.createLabel({text:"To:",top:"7%",left:"3%",font:{fontSize:30,fontWeight:"bold"}}),s=Ti.UI.createButton({title:"Send",top:"5%",right:"3%",width:"15%",height:"12%"}),l=Ti.UI.createTableView({data:getContacts(),backgroundColor:"transparent",separatorColor:Ti.App.backgroundColor}),c=Ti.UI.createTextArea({top:"20%",bottom:"1.5%",left:"1.5%",right:"1.5%",font:{fontSize:30}});o.addEventListener("click",function(){o.blur(),o.keyboardType=Ti.UI.KEYBOARD_PHONE_PAD,o.focus()}),l.addEventListener("click",function(e){var t=e.rowData.msisdn;Ti.API.info(t),o.setValue(t)}),s.addEventListener("click",function(){""==o.getValue()?alert("Select a phone number first"):(t(e,"en",o.getValue(),Ti.App.theMessage,1),Ti.API.info(Ti.App.theMessage),Ti.App.theMessage="",Ti.App.freeSMS>0&&Ti.App.freeSMS--)});var d=Ti.UI.createView({height:Ti.UI.SIZE,layout:"vertical",backgroundColor:Ti.App.backgroundColor}),u=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"51.5%",left:"3%",right:"3%",top:"1.5%",borderRadius:10});titleBar(d,"FreeSMS",Ti.App.foregroundColor,Ti.App.BackgroundColor),u.addEventListener("swipe",function(e){"down"==e.direction?o.blur():"up"==e.direction&&o.focus()});var h=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,top:"5%",left:"3%",right:"3%",bottom:"5%",borderRadius:10});return swipeWindow(i),closeMenu(i),u.add(o),u.add(n),u.add(c),i.add(d),d.add(u),d.add(h),u.add(s),h.add(l),i.openWin=a,i.close=r,i}exports.open=open;