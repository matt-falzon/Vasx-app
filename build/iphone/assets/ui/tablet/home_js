function open(e,t,a){function r(){var e=getDay(),t=getMonth();e=""+e;var a=e.slice(-1),r=e.charAt(0);switch(Ti.API.info(r),Ti.API.info(a),a){case"1":a=(r=1)?"th":"st";break;case"2":a=(r=1)?"th":"nd";break;case"3":a=(r=1)?"th":"rd";break;default:a="th"}switch(t){case 1:t="January";break;case 2:t="February";break;case 3:t="March";break;case 4:t="April";break;case 5:t="May";break;case 6:t="June";break;case 7:t="July";break;case 8:t="August";break;case 9:t="September";break;case 10:t="Octobor";break;case 11:t="November";break;case 12:t="Decemter";break;default:t="January"}l=e+a,s=t}function i(){"pt"==Ti.App.Language?(x.setText("meu Plano"),_.setText("você é no a  myplan plano"),C.setText("boas-vindas "+Ti.App.firstName+"!"),tableData=[{hasDetail:!0,title:"Ver meu detalhes",url:"viewDetails.js",myId:t},{hasDetail:!0,title:"Alterar meu detalhes",url:"changeDetails.js"},{hasDetail:!0,title:"grupos de contatos",url:"contactGroups.js",id:t}],g.setData(tableData)):"fr"==Ti.App.Language?(x.setText("Mon plan"),_.setText("vous êtes sur la  myplan plano"),C.setText("accueil "+Ti.App.firstName+"!"),tableData=[{hasDetail:!0,title:"Affichage de mes informations",url:"viewDetails.js",myId:t},{hasDetail:!0,title:"changer mes informations",url:"changeDetails.js"},{hasDetail:!0,title:"groupes de contact",url:"contactGroups.js",id:t}],g.setData(tableData)):"en"==Ti.App.Language&&(x.setText("My Plan"),_.setText("You are on the myplan plan"),C.setText("Welcome "+Ti.App.firstName+"!"),tableData=[{hasDetail:!0,title:"View my details",url:"viewDetails.js",myId:t},{hasDetail:!0,title:"Change my details",url:"changeDetails.js"},{hasDetail:!0,title:"Contact groups",url:"contactGroups.js",id:t}],g.setData(tableData))}function o(){0==e?h.open({transition:Ti.UI.iPhone.AnimationStyle.FLIP_FROM_RIGHT}):h.open()}function n(){h.close(),dataView.close()}Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/webService.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/libs/commonFunctions.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/ui/tablet/ApplicationWindow.js"),Ti.include(Ti.Filesystem.resourcesDirectory+"/ui/tablet/usageView.js"),Ti.App.backgroundColor,Ti.App.foregroundColor,Ti.API.info("free sms: "+Ti.App.freeSMS),theme("blue"),r(),Ti.API.info("Your session ID is: "+Ti.App.Session),Ti.API.info("Your MSISDN is: "+Ti.App.msisdn);var s,l,c=Ti.Database.open("local"),d=c.execute("SELECT lang_name, lang_code FROM user_language where msisdn = ?",Ti.App.msisdn);Ti.API.info("Language: "+d.fieldByName("lang_name"));var a=d.fieldByName("lang_code"),u=c.execute("SELECT country, site_name, url FROM data where msisdn = ?",Ti.App.msisdn);if(Ti.API.info("Country: "+u.fieldByName("country")),Ti.API.info("Site Name: "+u.fieldByName("site_name")),Ti.API.info("URL: "+u.fieldByName("url")),c.close(),0==e)var h=Ti.UI.createWindow({backgroundColor:"pink",left:e+"%"});else var h=Ti.UI.createWindow({backgroundColor:"pink",left:"15%"});closeMenu(h),swipeWindow(h),Ti.App.Language="pt"==a?"pt":"fr"==a?"fr":"en";var p=[{title:"View my details",url:"viewDetails.js",myId:t},{title:"Change my details",url:"changeDetails.js"},{title:"Contact groups",url:"contactGroups.js"}],g=Ti.UI.createTableView({data:p,backgroundColor:"transparent",scrollable:!1,separatorColor:Ti.App.backgroundColor,left:"50%",top:0,bottom:0,rowHeight:57}),m=Ti.UI.createView({backgroundColor:Ti.App.backgroundColor,top:"7%"}),f=Ti.UI.createView({top:"1.5%%",backgroundColor:Ti.App.foregroundColor,height:"17.7%",left:"1.5%",right:"1.5%"}),T=Ti.UI.createView({top:"19.5%",backgroundColor:Ti.App.foregroundColor,bottom:"13%",left:"1.5%",right:"1.5%"}),v=Ti.UI.createView({backgroundColor:Ti.App.foregroundColor,height:"10%",left:"1.5%",right:"1.5%",bottom:"1.5%"}),b=Ti.UI.createImageView({image:"/images/flags/enFlag.png",left:"15%",height:"40%",width:"12%"}),y=Ti.UI.createImageView({image:"/images/flags/portFlag.png",right:"15%",height:"40%",width:"12%"}),w=Ti.UI.createImageView({image:"/images/flags/frFlag.png",height:"40%",width:"12%"}),C=Ti.UI.createLabel({color:"#000",top:"25%",textAlign:"center",height:"auto",text:"Welcome "+Ti.App.firstName+"!"}),x=Ti.UI.createLabel({font:{fontSize:"30sp",fontWeight:"bold"},text:"My Plan: ",height:"auto",width:"auto",top:"18%",left:"1.5%",color:Ti.App.backgroundColor}),_=Ti.UI.createLabel({font:{fontSize:"26sp"},text:"You are on the myPlan plan",height:"auto",width:"auto",top:"50%",left:"1.5%",color:"#5A5D5E"}),R=Ti.UI.createLabel({font:{fontSize:"45sp"},text:"Todays Date",height:"auto",width:"auto",top:"15%",left:"55%",right:"1.5%",color:"#5A5D5E",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER}),I=Ti.UI.createLabel({font:{fontSize:"50sp",fontWeight:"bold"},text:s+" "+l,height:"auto",width:"auto",top:"40%",left:"55%",right:"1.5%",color:"#5A5D5E",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER}),A=Ti.UI.createButton({title:"Log out",style:Ti.UI.iPhone.SystemButtonStyle.BORDERED});return titleBar(h,"home",Ti.App.foregroundColor,Ti.App.BackgroundColor),i(),b.addEventListener("click",function(){alert("English"),Ti.App.Language="en",setLanguage(Ti.App.Session,Ti.App.Language,1),i();var e=Ti.Database.open("local");e.execute("DELETE FROM user_language WHERE msisdn =?",Ti.App.msisdn),e.execute("INSERT INTO user_language (msisdn, lang_code, lang_name) VALUES(?,?,?)",Ti.App.msisdn,"en","English"),e.close()}),y.addEventListener("click",function(){alert("Portuguese"),Ti.App.Language="pt",setLanguage(Ti.App.Session,Ti.App.Language,1),i();var e=Ti.Database.open("local");e.execute("DELETE FROM user_language WHERE msisdn =?",Ti.App.msisdn),e.execute("INSERT INTO user_language (msisdn, lang_code, lang_name) VALUES(?,?,?)",Ti.App.msisdn,"pt","Portuguese"),e.close()}),w.addEventListener("click",function(){alert("French"),Ti.App.Language="fr",setLanguage(Ti.App.Session,Ti.App.Language,1),i();var e=Ti.Database.open("local");e.execute("DELETE FROM user_language WHERE msisdn =?",Ti.App.msisdn),e.execute("INSERT INTO user_language (msisdn, lang_code, lang_name) VALUES(?,?,?)",Ti.App.msisdn,"fr","French"),e.close()}),dataView(T),f.add(I),f.add(R),f.add(_),f.add(x),m.add(f),m.add(T),m.add(v),v.add(b),v.add(y),v.add(w),h.setLeftNavButton(A),h.add(m),h.openWin=o,h.close=n,h}exports.open=open;