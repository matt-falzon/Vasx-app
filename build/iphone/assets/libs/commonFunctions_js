function theme(t){"green"==t&&(Ti.App.backgroundColor="#50C223",Ti.App.foregroundColor="#96CF80"),"orange"==t&&(Ti.App.backgroundColor="#FF8000",Ti.App.foregroundColor="#F2AE6B"),"red"==t&&(Ti.App.backgroundColor="#F70505",Ti.App.foregroundColor="#F5A9A9"),"blue"==t&&(Ti.App.backgroundColor="#1BA5E0",Ti.App.foregroundColor="#BDDBDB"),"white"==t&&(Ti.App.backgroundColor="#BDDBDB",Ti.App.foregroundColor="white")}function newUser(t){alert("As this is the first time you have logged in on this phone you will need to register"),Ti.API.info("\n \n \n new user \n \n \n ");var e=Ti.Network.createHTTPClient();e.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var a,r=generateXML("http://ws.proxy.mobile.vasx.com/","getNetworkInformation",a);e.open("POST","http://192.168.20.3:12080/mobile-proxy/MobileProxyService"),e.setRequestHeader("Content-Type","text/xml"),e.setRequestHeader("Content-Length",r.length),e.setRequestHeader("SOAPAction",'"getNetworkInformation"'),e.send(r),e.onload=function(){var a=e.responseXML.documentElement.getElementsByTagName("getNetworkInformationResponse"),r=[],i=[];if(a&&a.length>0){var n=Ti.XML.parseString(a.item(0).text),s=n.getElementsByTagName("Country"),o=n.getElementsByTagName("SiteName"),h=n.getElementsByTagName("SiteURL"),c=n.getElementsByTagName("Languages"),l=n.getElementsByTagName("vnUID");n.getElementsByTagName("Name"),n.getElementsByTagName("Code"),n.getElementsByTagName("Default");for(var d=0;s.length>d;d++){for(var u=0;c.item(d).getElementsByTagName("Name").length>u;u++){var p=c.item(d).getElementsByTagName("Name").item(u).text,f=c.item(d).getElementsByTagName("Code").item(u).text,g=c.item(d).getElementsByTagName("Default").item(u).text;r.push({name:p,code:f,def:g})}i.push({country:s.item(d).text,network:o.item(d).text,url:h.item(d).text,language:r,vnUID:l.item(d).text}),r=[]}var m=require("ui/common/registerUser");m.registerUser(i,t)}else{i.push({country:"Network ERROR",network:"",url:""});var m=require("ui/common/registerUser");m.registerUser(i,t)}}}function getContacts(){var t=[{name:" ",msisdn:""}],e=["fullName","recordId"],a=["phone"],r=Ti.Contacts.getAllPeople();Ti.API.info("Total contacts: "+r.length),Ti.API.info("---------------------");for(var i=0,n=r.length;n>i;i++){for(var s=r[i],o=0,h=e.length;h>o;o++);for(var o=0,h=a.length;h>o;o++){var c=JSON.stringify(s[a[o]]);c=c.replace(/\D/g,""),t.push({name:s[e[o]],msisdn:c,id:s[e[o+1]]})}}Ti.App.checks=0;for(var l=[],i=1;t.length>i;i++)l.push({title:t[i].name,msisdn:t[i].msisdn,id:t[i].id}),Ti.API.info("name: "+t[i].name+" msisdn: "+t[i].msisdn+"id: "+t[i].id);return l}function endSession(){disconnectSession(Ti.App.Session,Ti.App.Language,1)}function updateSwipe(t){t.addEventListener("dragEnd",function(){Ti.API.info("update")})}function swipeWindow(t){t.addEventListener("swipe",function(e){if("right"==e.direction){var a=Ti.UI.create2DMatrix();a=a.scale(1),t.animate({transform:a,duration:500,left:"15%"})}if("left"==e.direction){var a=Ti.UI.create2DMatrix();a=a.scale(1),t.animate({transform:a,duration:500,left:0})}})}function phoneSwipeWindowNoMaster(t){t.addEventListener("swipe",function(e){if("right"==e.direction)if(40==Ti.App.swipePosition){var a=Ti.UI.create2DMatrix();a=a.scale(1),t.animate({transform:a,duration:500,right:0}),Ti.App.swipePosition=0}else if(0==Ti.App.swipePosition){var a=Ti.UI.create2DMatrix();a=a.scale(1),t.animate({transform:a,duration:500,left:"51%"}),Ti.App.swipePosition=60}if("left"==e.direction&&60==Ti.App.swipePosition){var a=Ti.UI.create2DMatrix();a=a.scale(1),t.animate({transform:a,duration:500,left:0}),Ti.App.swipePosition=0}})}function phoneSwipeWindow(t){t.addEventListener("swipe",function(e){if("right"==e.direction)if(40==Ti.App.swipePosition){var a=Ti.UI.create2DMatrix();a=a.scale(1),t.animate({transform:a,duration:500,right:0}),Ti.App.swipePosition=0}else if(0==Ti.App.swipePosition){var a=Ti.UI.create2DMatrix();a=a.scale(1),t.animate({transform:a,duration:500,left:"51%"}),Ti.App.swipePosition=60}if("left"==e.direction)if(0==Ti.App.swipePosition){var a=Ti.UI.create2DMatrix();a=a.scale(1),t.animate({transform:a,duration:500,right:"40%"}),Ti.App.swipePosition=40}else if(60==Ti.App.swipePosition){var a=Ti.UI.create2DMatrix();a=a.scale(1),t.animate({transform:a,duration:500,left:0}),Ti.App.swipePosition=0}})}function tableSwipeWindow(t){t.addEventListener("swipe",function(e){if("right"==e.direction){var a=Ti.UI.create2DMatrix();a=a.scale(1),t.animate({transform:a,duration:500,left:"100%"}),setTimeout(function(){t.close()},550)}})}function closeMenu(t){var e=Ti.UI.create2DMatrix();e=e.scale(1),t.animate({transform:e,duration:500,left:0})}function closeWin(t){t.close()}function getMonth(){var t=new Date,e=t.getMonth()+1;return e}function getDay(){var t=new Date,e=t.getDate();return e}function getYear(){var t=new Date,e=t.getFullYear();return e}function titleBar(t,e,a,r){barView=Ti.UI.createView({top:0,height:"7%",backgroundColor:a});var e=Ti.UI.createLabel({text:e,font:{fontSize:"26sp",fontWeight:"bold"},color:r}),i=Ti.UI.createButton({title:"Log out",color:a,backgroundColor:r,left:"2%",top:"20%",bottom:"20%",borderWidth:0,borderRadius:10});i.addEventListener("click",function(){closeWin(t),endSession(),Ti.App.mainWin.close()}),barView.add(i),barView.add(e),t.add(barView)}function titleBarSave(t,e,a,r){barView=Ti.UI.createView({top:0,height:"7%",backgroundColor:a});var e=Ti.UI.createLabel({text:e,font:{fontSize:"26sp",fontWeight:"bold"},color:r}),i=Ti.UI.createButton({title:"Log out",color:a,backgroundColor:r,left:"2%",top:"20%",bottom:"20%",borderWidth:0,borderRadius:10}),n=Ti.UI.createButton({title:"Save",color:a,backgroundColor:r,right:"2%",top:"20%",bottom:"20%",borderWidth:0,borderRadius:10});getSecretQuestionDetails(),n.addEventListener("click",function(){setPasswordHints(Ti.App.Session,Ti.App.Language,details[0],details[1],details[2],details[3],details[4],details[5],details[6])}),i.addEventListener("click",function(){closeWin(t),endSession(),Ti.App.mainWin.close()}),barView.add(i),barView.add(e),barView.add(n),t.add(barView)}function setPasswordHints(t,e,a){var r=getHints(),i=Ti.Network.createHTTPClient(),a=1;i.onerror=function(){Ti.API.error(this.status+" - "+this.statusText)};var n=[{SessionID:t,LanguageCode:e,QuestionCode1:r[0],Answer1:r[1],QuestionCode2:r[2],Answer2:r[3],QuestionCode3:r[4],Answer3:r[5],VirtualNetwork:a}],s=generateXML("http://service.adminportal.vasx.com/","setPasswordHints",n);i.open("POST","http://192.168.20.3:12080/vx_adminportal/AdminPortal"),i.setRequestHeader("Content-Type","text/xml"),i.setRequestHeader("Content-Length",s.length),i.setRequestHeader("SOAPAction",'"setPasswordHints"'),i.send(s),i.onload=function(){var t=i.responseXML.documentElement.getElementsByTagName("setPasswordHintsResponse");if(t&&t.length>0){Ti.API.info(t.item(0).text);var e=Ti.XML.parseString(t.item(0).text);alert(e.getElementsByTagName("Message").item(0).text)}}}Ti.include("webService.js");var details=[];