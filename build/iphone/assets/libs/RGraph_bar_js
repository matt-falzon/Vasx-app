"undefined"==typeof RGraph&&(RGraph={}),RGraph.Bar=function(t,e){if(this.id=t,this.canvas=document.getElementById(t),this.context=this.canvas.getContext?this.canvas.getContext("2d"):null,this.canvas.__object__=this,this.type="bar",this.max=0,this.stackedOrGrouped=!1,this.isRGraph=!0,this.uid=RGraph.CreateUID(),this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID(),this.colorsParsed=!1,RGraph.OldBrowserCompat(this.context),this.properties={"chart.background.barcolor1":"rgba(0,0,0,0)","chart.background.barcolor2":"rgba(0,0,0,0)","chart.background.grid":!0,"chart.background.grid.color":"#ddd","chart.background.grid.width":1,"chart.background.grid.hsize":20,"chart.background.grid.vsize":20,"chart.background.grid.vlines":!0,"chart.background.grid.hlines":!0,"chart.background.grid.border":!0,"chart.background.grid.autofit":!0,"chart.background.grid.autofit.numhlines":5,"chart.background.grid.autofit.numvlines":20,"chart.background.image.stretch":!0,"chart.background.image.x":null,"chart.background.image.y":null,"chart.background.image.w":null,"chart.background.image.h":null,"chart.background.image.align":null,"chart.ytickgap":20,"chart.smallyticks":3,"chart.largeyticks":5,"chart.numyticks":10,"chart.hmargin":5,"chart.hmargin.grouped":1,"chart.strokecolor":"rgba(0,0,0,0)","chart.axis.color":"black","chart.axis.linewidth":1,"chart.gutter.top":25,"chart.gutter.bottom":25,"chart.gutter.left":25,"chart.gutter.right":25,"chart.labels":null,"chart.labels.ingraph":null,"chart.labels.above":!1,"chart.labels.above.decimals":0,"chart.labels.above.size":null,"chart.labels.above.angle":null,"chart.ylabels":!0,"chart.ylabels.count":5,"chart.ylabels.inside":!1,"chart.xlabels.offset":0,"chart.xaxispos":"bottom","chart.yaxispos":"left","chart.text.angle":0,"chart.text.color":"black","chart.text.size":10,"chart.text.font":"Arial","chart.ymin":0,"chart.ymax":null,"chart.title":"","chart.title.font":null,"chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":!0,"chart.title.xaxis":"","chart.title.xaxis.bold":!0,"chart.title.xaxis.size":null,"chart.title.xaxis.font":null,"chart.title.yaxis":"","chart.title.yaxis.bold":!0,"chart.title.yaxis.size":null,"chart.title.yaxis.font":null,"chart.title.yaxis.color":null,"chart.title.xaxis.pos":null,"chart.title.yaxis.pos":null,"chart.title.x":null,"chart.title.y":null,"chart.title.halign":null,"chart.title.valign":null,"chart.colors":["#01B4FF","#0f0","#00f","#ff0","#0ff","#0f0"],"chart.colors.sequential":!1,"chart.colors.reverse":!1,"chart.grouping":"grouped","chart.variant":"bar","chart.variant.sketch.verticals":!0,"chart.shadow":!1,"chart.shadow.color":"#999","chart.shadow.offsetx":3,"chart.shadow.offsety":3,"chart.shadow.blur":3,"chart.tooltips":null,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onclick","chart.tooltips.highlight":!0,"chart.highlight.stroke":"rgba(0,0,0,0)","chart.highlight.fill":"rgba(255,255,255,0.7)","chart.background.hbars":null,"chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.shadow":!1,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":!0,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.halign":"right","chart.key.color.shape":"square","chart.key.rounded":!0,"chart.key.text.size":10,"chart.key.linewidth":1,"chart.key.colors":null,"chart.contextmenu":null,"chart.units.pre":"","chart.units.post":"","chart.scale.decimals":0,"chart.scale.point":".","chart.scale.thousand":",","chart.crosshairs":!1,"chart.crosshairs.color":"#333","chart.crosshairs.hline":!0,"chart.crosshairs.vline":!0,"chart.linewidth":1,"chart.annotatable":!1,"chart.annotate.color":"black","chart.zoom.factor":1.5,"chart.zoom.fade.in":!0,"chart.zoom.fade.out":!0,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":!0,"chart.zoom.background":!0,"chart.resizable":!1,"chart.resize.handle.adjust":[0,0],"chart.resize.handle.background":null,"chart.adjustable":!1,"chart.noaxes":!1,"chart.noxaxis":!1,"chart.noyaxis":!1,"chart.events.click":null,"chart.events.mousemove":null,"chart.numxticks":null,"chart.bevel":!1},!this.canvas)return alert("[BAR] No canvas support"),void 0;for(var a=0;e.length>a;++a)"object"==typeof e[a]&&(this.stackedOrGrouped=!0);for(var r=RGraph.array_linearize(e),a=0;r.length>a;++a)this["$"+a]={};this.data=e,this.coords=[],this.coords2=[],this.coordsText=[],this.data_arr=RGraph.array_linearize(this.data),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),RGraph.Register(this)},RGraph.Bar.prototype.Set=function(t,e){if(t=t.toLowerCase(),"chart."!=t.substr(0,6)&&(t="chart."+t),"chart.labels.abovebar"==t&&(t="chart.labels.above"),"chart.strokestyle"==t&&(t="chart.strokecolor"),"chart.xaxispos"==t&&("bottom"!=e&&"center"!=e&&"top"!=e&&(alert("[BAR] ("+this.id+") chart.xaxispos should be top, center or bottom. Tried to set it to: "+e+" Changing it to center"),e="center"),"top"==e))for(var a=0;this.data.length>a;++a)"number"==typeof this.data[a]&&this.data[a]>0&&alert("[BAR] The data element with index "+a+" should be negative");return"chart.linewidth"==t.toLowerCase()&&0==e&&(e=1e-4),this.properties[t]=e,this},RGraph.Bar.prototype.Get=function(t){return"chart."!=t.substr(0,6)&&(t="chart."+t),this.properties[t]},RGraph.Bar.prototype.Draw=function(){"string"==typeof this.properties["chart.background.image"]&&RGraph.DrawBackgroundImage(this),RGraph.FireCustomEvent(this,"onbeforedraw"),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.gutterLeft=this.properties["chart.gutter.left"],this.gutterRight=this.properties["chart.gutter.right"],this.gutterTop=this.properties["chart.gutter.top"],this.gutterBottom=this.properties["chart.gutter.bottom"];for(var t=0;this.data.length>t;++t)null==this.data[t]&&(this.data[t]=0);return("pyramid"==this.properties["chart.variant"]||"dot"==this.properties["chart.variant"])&&"object"==typeof this.properties["chart.tooltips"]&&this.properties["chart.tooltips"]&&this.properties["chart.tooltips"].length>0&&alert("[BAR] ("+this.id+") Sorry, tooltips are not supported with dot or pyramid charts"),this.coords=[],this.coords2=[],this.coordsText=[],this.max=0,this.grapharea=this.canvas.height-this.gutterTop-this.gutterBottom,this.halfgrapharea=this.grapharea/2,this.halfTextHeight=this.properties["chart.text.size"]/2,RGraph.background.Draw(this),"sketch"==this.properties["chart.variant"]?(this.DrawAxes(),this.Drawbars()):(this.Drawbars(),this.DrawAxes()),this.DrawLabels(),(this.properties["chart.bevel"]||this.properties["chart.bevelled"])&&this.DrawBevel(),this.properties["chart.key"]&&this.properties["chart.key"].length&&RGraph.DrawKey(this,this.properties["chart.key"],this.properties["chart.colors"]),this.properties["chart.contextmenu"]&&RGraph.ShowContext(this),this.properties["chart.labels.ingraph"]&&RGraph.DrawInGraphLabels(this),this.properties["chart.resizable"]&&RGraph.AllowResizing(this),RGraph.InstallEventListeners(this),RGraph.FireCustomEvent(this,"ondraw"),this},RGraph.Bar.prototype.DrawAxes=function(){if(!this.properties["chart.noaxes"]){var t=this.properties["chart.xaxispos"],e=this.properties["chart.yaxispos"],a="sketch"==this.properties["chart.variant"];this.context.beginPath(),this.context.strokeStyle=this.properties["chart.axis.color"],this.context.lineWidth=this.properties["chart.axis.linewidth"]+.001,-1==navigator.userAgent.indexOf("Safari")&&(this.context.lineCap="square"),0==this.properties["chart.noyaxis"]&&("right"==e?(this.context.moveTo(this.canvas.width-this.gutterRight+(a?3:0),this.gutterTop-(a?3:0)),this.context.lineTo(this.canvas.width-this.gutterRight-(a?2:0),this.canvas.height-this.gutterBottom+(a?5:0))):(this.context.moveTo(this.gutterLeft-(a?2:0),this.gutterTop-(a?5:0)),this.context.lineTo(this.gutterLeft-(a?1:0),this.canvas.height-this.gutterBottom+(a?5:0)))),0==this.properties["chart.noxaxis"]&&("center"==t?(this.context.moveTo(this.gutterLeft-(a?5:0),Math.round((this.canvas.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop+(a?2:0))),this.context.lineTo(this.canvas.width-this.gutterRight+(a?5:0),Math.round((this.canvas.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-(a?2:0)))):"top"==t?(this.context.moveTo(this.gutterLeft-(a?3:0),this.gutterTop-(a?3:0)),this.context.lineTo(this.canvas.width-this.gutterRight+(a?5:0),this.gutterTop+(a?2:0))):(this.context.moveTo(this.gutterLeft-(a?5:0),this.canvas.height-this.gutterBottom-(a?2:0)),this.context.lineTo(this.canvas.width-this.gutterRight+(a?8:0),this.canvas.height-this.gutterBottom+(a?2:0))));var r=this.properties["chart.numyticks"];if(0==this.properties["chart.noyaxis"]&&!a){var i=(this.canvas.height-this.gutterTop-this.gutterBottom)/r,s="left"==e?this.gutterLeft:this.canvas.width-this.gutterRight;if(this.properties["chart.numyticks"]>0)for(y=this.gutterTop;"center"==t?this.canvas.height-this.gutterBottom>=y:this.canvas.height-this.gutterBottom+("top"==t?1:0)>y;y+=i)("center"!=t||y!=this.gutterTop+this.grapharea/2)&&("top"!=t||y!=this.gutterTop)&&(this.context.moveTo(s+("left"==e?0:0),Math.round(y)),this.context.lineTo(s+("left"==e?-3:3),Math.round(y)));this.properties["chart.noxaxis"]&&("center"==t?(this.context.moveTo(s+("left"==e?-3:3),Math.round(this.canvas.height/2)),this.context.lineTo(s,Math.round(this.canvas.height/2))):"top"==t?(this.context.moveTo(s+("left"==e?-3:3),Math.round(this.gutterTop)),this.context.lineTo(s,Math.round(this.gutterTop))):(this.context.moveTo(s+("left"==e?-3:3),Math.round(this.canvas.height-this.gutterBottom)),this.context.lineTo(s,Math.round(this.canvas.height-this.gutterBottom))))}if(0==this.properties["chart.noxaxis"]&&!a){if("number"==typeof this.properties["chart.numxticks"])var o=(this.canvas.width-this.gutterLeft-this.gutterRight)/this.properties["chart.numxticks"];else var o=(this.canvas.width-this.gutterLeft-this.gutterRight)/this.data.length;"bottom"==t?(yStart=this.canvas.height-this.gutterBottom,yEnd=this.canvas.height-this.gutterBottom+3):"top"==t?(yStart=this.gutterTop-3,yEnd=this.gutterTop):"center"==t&&(yStart=(this.canvas.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop+3,yEnd=(this.canvas.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-3),yStart=yStart,yEnd=yEnd;var h=this.properties["chart.noendxtick"];for(x=this.gutterLeft+("left"==e?o:0);this.canvas.width-this.gutterRight+("left"==e?5:0)>x;x+=o)"left"==e&&!h&&x>this.gutterLeft?(this.context.moveTo(Math.round(x),yStart),this.context.lineTo(Math.round(x),yEnd)):"left"==e&&h&&x>this.gutterLeft&&this.canvas.width-this.gutterRight>x?(this.context.moveTo(Math.round(x),yStart),this.context.lineTo(Math.round(x),yEnd)):"right"==e&&this.canvas.width-this.gutterRight>x&&!h?(this.context.moveTo(Math.round(x),yStart),this.context.lineTo(Math.round(x),yEnd)):"right"==e&&this.canvas.width-this.gutterRight>x&&x>this.gutterLeft&&h&&(this.context.moveTo(Math.round(x),yStart),this.context.lineTo(Math.round(x),yEnd));(this.properties["chart.noyaxis"]||null==this.properties["chart.numxticks"])&&"number"==typeof this.properties["chart.numxticks"]&&this.properties["chart.numxticks"]>0&&(this.context.moveTo(Math.round(this.gutterLeft),yStart),this.context.lineTo(Math.round(this.gutterLeft),yEnd))}this.properties["chart.noyaxis"]&&0==this.properties["chart.noxaxis"]&&null==this.properties["chart.numxticks"]&&("center"==t?(this.context.moveTo(Math.round(this.gutterLeft),this.canvas.height/2-3),this.context.lineTo(Math.round(this.gutterLeft),this.canvas.height/2+3)):(this.context.moveTo(Math.round(this.gutterLeft),this.canvas.height-this.gutterBottom),this.context.lineTo(Math.round(this.gutterLeft),this.canvas.height-this.gutterBottom+3))),this.context.stroke()}},RGraph.Bar.prototype.Drawbars=function(){var t=this.canvas,e=this.context,a=this.properties;if(e.lineWidth=a["chart.linewidth"],e.strokeStyle=a["chart.strokecolor"],e.fillStyle=a["chart.colors"][0],a["chart.scale.decimals"],a["chart.ymax"])this.scale2=RGraph.getScale2(this,{max:a["chart.ymax"],strict:!0,min:a["chart.ymin"],"scale.thousand":a["chart.scale.thousand"],"scale.point":a["chart.scale.point"],"scale.decimals":a["chart.scale.decimals"],"ylabels.count":a["chart.ylabels.count"],"scale.round":a["chart.scale.round"],"units.pre":a["chart.units.pre"],"units.post":a["chart.units.post"]});else{for(i=0;this.data.length>i;++i){if("object"==typeof this.data[i])var r="grouped"==a["chart.grouping"]?Number(RGraph.array_max(this.data[i],!0)):Number(RGraph.array_sum(this.data[i]));else var r=Number(this.data[i]);this.max=Math.max(Math.abs(this.max),Math.abs(r))}this.scale2=RGraph.getScale2(this,{max:this.max,min:a["chart.ymin"],"scale.thousand":a["chart.scale.thousand"],"scale.point":a["chart.scale.point"],"scale.decimals":a["chart.scale.decimals"],"ylabels.count":a["chart.ylabels.count"],"scale.round":a["chart.scale.round"],"units.pre":a["chart.units.pre"],"units.post":a["chart.units.post"]})}a["chart.adjustable"]&&!a["chart.ymax"]&&this.Set("chart.ymax",this.scale2.max),a["chart.background.hbars"]&&a["chart.background.hbars"].length>0&&RGraph.DrawBars(this);var s=a["chart.variant"];"3d"==s&&RGraph.Draw3DAxes(this);var o=a["chart.xaxispos"],h=(this.canvas.width-this.gutterLeft-this.gutterRight)/this.data.length,n=a["chart.hmargin"],c=a["chart.shadow"],l=a["chart.shadow.color"],p=a["chart.shadow.blur"],u=a["chart.shadow.offsetx"],d=a["chart.shadow.offsety"],f=a["chart.strokecolor"],g=a["chart.colors"],m=0;for(i=0;this.data.length>i;++i){var v=(0>RGraph.array_sum(this.data[i])?RGraph.array_sum(this.data[i])+this.scale2.min:RGraph.array_sum(this.data[i])-this.scale2.min)/(this.scale2.max-this.scale2.min)*(t.height-this.gutterTop-this.gutterBottom);"center"==o&&(v/=2);var y=i*h+this.gutterLeft,_="center"==o?(t.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-v:t.height-v-this.gutterBottom;if("top"==o&&(_=this.gutterTop+Math.abs(v)),0>v&&(_+=v,v=Math.abs(v)),c&&(e.shadowColor=l,e.shadowBlur=p,e.shadowOffsetX=u,e.shadowOffsetY=d),this.context.beginPath(),"number"==typeof this.data[i]){var b=h-2*n;if(0>b&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),e.strokeStyle=f,e.fillStyle=g[0],a["chart.colors.sequential"]&&(e.fillStyle=g[i]),"sketch"==s){if(this.context.lineCap="round",e.beginPath(),e.strokeStyle=g[0],a["chart.colors.sequential"]&&(e.strokeStyle=g[i]),e.moveTo(y+n+2,_+v-2),e.lineTo(y+n-1,_-4),e.moveTo(y+n-3,_+-2+(0>this.data[i]?v:0)),e.bezierCurveTo(y+.33*(n+h),_+15+(0>this.data[i]?v-10:0),y+.66*(n+h),_+5+(0>this.data[i]?v-10:0),y+n+h+-1,_+0+(0>this.data[i]?v:0)),e.moveTo(y+n+h-5,_-5),e.lineTo(y+n+h-3,_+v-3),a["chart.variant.sketch.verticals"])for(var R=.2;.8>=R;R+=.2)e.moveTo(y+n+h+(R>.4?-1:3)-R*h,_-1),e.lineTo(y+n+h-(R>.4?1:-1)-R*h,_+v+(.2==R?1:-2));this.context.stroke()}else if("bar"==s||"3d"==s||"glass"==s||"bevel"==s){if(RGraph.isOld()&&c&&this.DrawIEShadow([y+n,_,b,v]),"glass"==s?(RGraph.filledCurvyRect(this.context,y+n,_,b,v,3,this.data[i]>0,this.data[i]>0,0>this.data[i],0>this.data[i]),RGraph.strokedCurvyRect(this.context,y+n,_,b,v,3,this.data[i]>0,this.data[i]>0,0>this.data[i],0>this.data[i])):(this.context.strokeRect(y+n,_,b,v),this.context.fillRect(y+n,_,b,v)),"3d"==s){var G=e.strokeStyle,x=e.fillStyle;e.beginPath(),e.moveTo(y+n,_),e.lineTo(y+n+10,_-5),e.lineTo(y+n+10+b,_-5),e.lineTo(y+n+b,_),e.closePath(),e.stroke(),e.fill(),e.beginPath(),e.moveTo(y+n+b,_),e.lineTo(y+n+b+10,_-5),e.lineTo(y+n+b+10,_+v-5),e.lineTo(y+n+b,_+v),e.closePath(),e.stroke(),e.fill(),e.beginPath(),e.fillStyle="rgba(255,255,255,0.3)",e.moveTo(y+n,_),e.lineTo(y+n+10,_-5),e.lineTo(y+n+10+b,_-5),e.lineTo(y+n+b,_),e.lineTo(y+n,_),e.closePath(),e.stroke(),e.fill(),e.beginPath(),e.fillStyle="rgba(0,0,0,0.4)",e.moveTo(y+n+b,_),e.lineTo(y+n+b+10,_-5),e.lineTo(y+n+b+10,_-5+v),e.lineTo(y+n+b,_+v),e.lineTo(y+n+b,_),e.closePath(),e.stroke(),e.fill(),e.strokeStyle=G,e.fillStyle=x}else if("glass"==s){var w=e.createLinearGradient(y+n,_,y+n+b/2,_);w.addColorStop(0,"rgba(255,255,255,0.9)"),w.addColorStop(1,"rgba(255,255,255,0.5)"),e.beginPath(),e.fillStyle=w,e.fillRect(y+n+2,_+(this.data[i]>0?2:0),b/2-2,v-2),e.fill()}if(a["chart.labels.above"]){c&&RGraph.NoShadow(this);var C=_-3,T=y+n+b/2;if(0>this.data[i]&&(C+=v+6+a["chart.text.size"]),"top"==a["chart.xaxispos"]&&(C=this.gutterTop+v+6+("number"==typeof a["chart.labels.above.size"]?a["chart.labels.above.size"]:a["chart.text.size"]-4)),"3d"==a["chart.variant"]&&(C-=3,T+=5),this.properties["chart.labels.above.angle"])var E=-45,S="left",B="center";else var E=0,S="center",B="bottom";e.fillStyle=a["chart.text.color"],RGraph.Text2(this,{font:a["chart.text.font"],size:"number"==typeof a["chart.labels.above.size"]?a["chart.labels.above.size"]:a["chart.text.size"]-3,x:T,y:C,text:RGraph.number_format(this,Number(this.data[i]).toFixed(a["chart.labels.above.decimals"]),a["chart.units.pre"],a["chart.units.post"]),halign:S,marker:!1,valign:B,angle:E,tag:"labels.above"})}}else"dot"==s?(e.beginPath(),e.moveTo(y+h/2,_),e.lineTo(y+h/2,_+v),e.stroke(),e.beginPath(),e.fillStyle=this.properties["chart.colors"][i],e.arc(y+h/2,_+(this.data[i]>0?0:v),2,0,6.28,0),e.fillStyle=a["chart.colors"][0],a["chart.colors.sequential"]&&(e.fillStyle=g[i]),e.stroke(),e.fill()):alert("[BAR] Warning! Unknown chart.variant: "+s);this.coords.push([y+n,_,h-2*n,v]),this.coords2[i]===void 0&&(this.coords2[i]=[]),this.coords2[i].push([y+n,_,h-2*n,v])}else if("object"==typeof this.data[i]&&"stacked"==a["chart.grouping"]){this.scale2.min&&alert("[ERROR] Stacked Bar charts with a Y min are not supported");var b=h-2*n,A=[],j=0,I=this.data[i];for(0>b&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),z=0;I.length>z;++z){if("center"==o)return alert("[BAR] It's pointless having the X axis position at the center on a stacked bar chart."),void 0;if(0>this.data[i][z])return alert("[BAR] Negative values are not permitted with a stacked bar chart. Try a grouped one instead."),void 0;e.strokeStyle=f,e.fillStyle=g[z],a["chart.colors.reverse"]&&(e.fillStyle=g[this.data[i].length-z-1]),a["chart.colors.sequential"]&&g[m]?e.fillStyle=g[m++]:a["chart.colors.sequential"]&&(e.fillStyle=g[m-1]);var v=I[z]/this.scale2.max*(t.height-this.gutterTop-this.gutterBottom);if("center"==o&&(v/=2),RGraph.array_sum(I)/this.scale2.max*(t.height-n-this.gutterTop-this.gutterBottom),this.coords.push([y+n,_,h-2*n,v]),this.coords2[i]===void 0&&(this.coords2[i]=[]),this.coords2[i].push([y+n,_,h-2*n,v]),RGraph.isOld()&&c&&this.DrawIEShadow([y+n,_,h-2*n,v+1]),e.strokeRect(y+n,_,h-2*n,v),e.fillRect(y+n,_,h-2*n,v),0==z)var j=_,V=y;if(c&&A.push([y+n,_,h-2*n,v,e.fillStyle]),"3d"==s){var x=e.fillStyle,G=e.strokeStyle;0==z&&(e.beginPath(),e.moveTo(V+n,_),e.lineTo(V+10+n,_-5),e.lineTo(V+10+b+n,_-5),e.lineTo(V+b+n,_),e.closePath(),e.fill(),e.stroke()),e.beginPath(),e.moveTo(V+b+n,_),e.lineTo(V+b+n+10,_-5),e.lineTo(V+b+n+10,_-5+v),e.lineTo(V+b+n,_+v),e.closePath(),e.fill(),e.stroke(),0==z&&(e.fillStyle="rgba(255,255,255,0.3)",e.beginPath(),e.moveTo(V+n,_),e.lineTo(V+10+n,_-5),e.lineTo(V+10+b+n,_-5),e.lineTo(V+b+n,_),e.closePath(),e.fill(),e.stroke()),e.fillStyle="rgba(0,0,0,0.4)",e.beginPath(),e.moveTo(V+b+n,_),e.lineTo(V+b+n+10,_-5),e.lineTo(V+b+n+10,_-5+v),e.lineTo(V+b+n,_+v),e.closePath(),e.fill(),e.stroke(),e.strokeStyle=G,e.fillStyle=x}_+=v}if(this.Get("chart.labels.above")){if(RGraph.NoShadow(this),e.fillStyle=a["chart.text.color"],this.properties["chart.labels.above.angle"])var E=-45,S="left",B="center";else var E=0,S="center",B="bottom";RGraph.Text2(this,{font:a["chart.text.font"],size:"number"==typeof a["chart.labels.above.size"]?a["chart.labels.above.size"]:a["chart.text.size"]-3,x:V+b/2+a["chart.hmargin"],y:j-(a["chart.shadow"]&&0>this.properties["chart.shadow.offsety"]?7:4)-("3d"==a["chart.variant"]?5:0),text:a["chart.units.pre"]+RGraph.array_sum(this.data[i]).toFixed(a["chart.labels.above.decimals"])+a["chart.units.post"]+"",angle:E,valign:B,halign:S,tag:"labels.above"}),c&&(e.shadowColor=l,e.shadowBlur=p,e.shadowOffsetX=u,e.shadowOffsetY=d)}if(c){for(RGraph.NoShadow(this),k=0;A.length>k;++k)e.strokeStyle=f,e.fillStyle=A[k][4],e.strokeRect(A[k][0],A[k][1],A[k][2],A[k][3]),e.fillRect(A[k][0],A[k][1],A[k][2],A[k][3]),e.stroke(),e.fill();A=[]}}else if("object"==typeof this.data[i]&&"grouped"==this.properties["chart.grouping"]){var A=[];for(e.lineWidth=a["chart.linewidth"],z=0;this.data[i].length>z;++z){e.strokeStyle=f,e.fillStyle=g[z],a["chart.colors.sequential"]&&g[m]?e.fillStyle=g[m++]:a["chart.colors.sequential"]&&(e.fillStyle=g[m-1]);var Q=(h-2*n)/this.data[i].length,v=(this.data[i][z]+(0>this.data[i][z]?this.scale2.min:-1*this.scale2.min))/(this.scale2.max-this.scale2.min)*(t.height-this.gutterTop-this.gutterBottom),M=this.properties["chart.hmargin.grouped"],V=y+n+z*Q;if(0>Q&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),"center"==o&&(v/=2),"top"==o)var j=this.gutterTop,v=Math.abs(v);else if("center"==o)var j=this.gutterTop+this.grapharea/2-v;else var j=this.canvas.height-this.gutterBottom-v,v=Math.abs(v);if(RGraph.isOld()&&c&&this.DrawIEShadow([V,j,Q,v]),e.strokeRect(V+M,j,Q-2*M,v),e.fillRect(V+M,j,Q-2*M,v),_+=v,"3d"==s){var x=e.fillStyle,G=e.strokeStyle;e.beginPath(),e.moveTo(V,j),e.lineTo(V+10,j-5),e.lineTo(V+10+Q,j-5),e.lineTo(V+Q,j),e.closePath(),e.fill(),e.stroke(),e.beginPath(),e.moveTo(V+Q,j),e.lineTo(V+Q+10,j-5),e.lineTo(V+Q+10,j-5+v),e.lineTo(V+Q,j+v),e.closePath(),e.fill(),e.stroke(),e.fillStyle="rgba(255,255,255,0.3)",e.beginPath(),e.moveTo(V,j),e.lineTo(V+10,j-5),e.lineTo(V+10+Q,j-5),e.lineTo(V+Q,j),e.closePath(),e.fill(),e.stroke(),e.fillStyle="rgba(0,0,0,0.4)",e.beginPath(),e.moveTo(V+Q,j),e.lineTo(V+Q+10,j-5),e.lineTo(V+Q+10,j-5+v),e.lineTo(V+Q,j+v),e.closePath(),e.fill(),e.stroke(),e.strokeStyle=G,e.fillStyle=x}if(0>v&&(v=Math.abs(v),j-=v),this.coords.push([V+M,j,Q-2*M,v]),this.coords2[i]===void 0&&(this.coords2[i]=[]),this.coords2[i].push([y+n+M,_,h-2*n-2*M,v]),a["chart.shadow"]&&A.push([V+M,j,Q-2*M,v,e.fillStyle]),a["chart.labels.above"]){e.strokeStyle="rgba(0,0,0,0)",c&&RGraph.NoShadow(this);var C=_-3;if(this.properties["chart.labels.above.angle"])var E=-45,S="left",B="center";else{var E=0,S="center",B="bottom";if(0>this.data[i][z]||"top"==this.properties["chart.xaxispos"]){C=j+v+6;var B="top"}else C=j}e.fillStyle=a["chart.text.color"],RGraph.Text2(this,{font:a["chart.text.font"],size:"number"==typeof a["chart.labels.above.size"]?a["chart.labels.above.size"]:a["chart.text.size"]-3,x:V+Q/2,y:C-3,text:RGraph.number_format(this,this.data[i][z].toFixed(a["chart.labels.above.decimals"])),halign:S,valign:B,angle:E,tag:"labels.above"}),c&&(e.shadowColor=l,e.shadowBlur=p,e.shadowOffsetX=u,e.shadowOffsetY=d)}}if(A.length){RGraph.NoShadow(this),e.lineWidth=a["chart.linewidth"],e.beginPath();for(var z=0;A.length>z;++z)e.fillStyle=A[z][4],e.strokeStyle=a["chart.strokecolor"],e.fillRect(A[z][0],A[z][1],A[z][2],A[z][3]),e.strokeRect(A[z][0],A[z][1],A[z][2],A[z][3]);e.fill(),e.stroke(),A=[]}}e.closePath()}RGraph.NoShadow(this)},RGraph.Bar.prototype.DrawLabels=function(){var t=this.context;this.properties["chart.text.angle"];var e=this.properties["chart.text.size"],a=this.properties["chart.labels"];if(this.properties["chart.ylabels"]&&("top"==this.properties["chart.xaxispos"]&&this.Drawlabels_top(),"center"==this.properties["chart.xaxispos"]&&this.Drawlabels_center(),"bottom"==this.properties["chart.xaxispos"]&&this.Drawlabels_bottom()),"object"==typeof a&&a){var r=Number(this.properties["chart.xlabels.offset"]);if(0!=this.properties["chart.text.angle"])var i="center",s="right",o=0-this.properties["chart.text.angle"];else var i="top",s="center",o=0;t.fillStyle=this.properties["chart.text.color"],(this.canvas.width-this.gutterRight-this.gutterLeft)/a.length,xTickGap=(this.canvas.width-this.gutterRight-this.gutterLeft)/a.length;var h=0,n=this.properties["chart.text.font"];for(x=this.gutterLeft+xTickGap/2;this.canvas.width-this.gutterRight>=x;x+=xTickGap)RGraph.Text2(this,{font:n,size:e,x:x,y:"top"==this.properties["chart.xaxispos"]?this.gutterTop-r-5:this.canvas.height-this.gutterBottom+r+3,text:a[h++]+"",valign:"top"==this.properties["chart.xaxispos"]?"bottom":i,halign:s,tag:"label",marker:!1,angle:o,tag:"labels"})}if(this.properties["chart.labels.above.specific"])for(var a=this.properties["chart.labels.above.specific"],h=0;this.coords.length>h;++h){var c=this.properties["chart.xaxispos"],l=this.coords[h],p=this.data_arr[h],i=p>=0&&"top"!=c?"bottom":"top",s="center",u=a[h];u&&(""+u).length>0&&RGraph.Text2(this,{font:this.properties["chart.text.font"],size:this.properties["chart.labels.above.size"]?this.properties["chart.labels.above.size"]:this.properties["chart.text.size"],x:l[0]+l[2]/2,y:p>=0&&"top"!=c?l[1]-5:l[1]+l[3]+3,text:a[h]+"",valign:i,halign:s,tag:"labels.above"})}},RGraph.Bar.prototype.Drawlabels_top=function(){var t=this.canvas,e=this.context,a=this.properties;if(e.beginPath(),e.fillStyle=a["chart.text.color"],e.strokeStyle="black","top"==a["chart.xaxispos"]){var r=a["chart.text.size"],i=a["chart.units.pre"],s=a["chart.units.post"],o="left"==a["chart.yaxispos"]?"right":"left",h=a["chart.text.font"];if(a["chart.ylabels.count"],a["chart.ymin"],1==a["chart.ylabels.inside"])var n="left"==a["chart.yaxispos"]?this.gutterLeft+5:t.width-this.gutterRight-5,o="left"==a["chart.yaxispos"]?"left":"right",c=!0;else var n="left"==a["chart.yaxispos"]?this.gutterLeft-5:t.width-this.gutterRight+5,c=!1;if("object"==typeof a["chart.ylabels.specific"]&&a["chart.ylabels.specific"]){for(var l=RGraph.array_reverse(a["chart.ylabels.specific"]),p=t.height-this.gutterTop-this.gutterBottom,u=0;l.length>u;++u){var d=this.gutterTop+p*(u/l.length)+p/l.length;RGraph.Text2(this,{font:h,size:r,x:n,y:d,text:l[u]+"",valign:"center",halign:o,bordered:c,tag:"scale"})}return}for(var l=this.scale2.labels,u=0;l.length>u;++u)RGraph.Text2(this,{font:h,size:r,x:n,y:this.gutterTop+this.grapharea/l.length*(u+1),text:"-"+l[u],valign:"center",halign:o,bordered:c,tag:"scale"});(0!=a["chart.ymin"]||a["chart.noxaxis"])&&RGraph.Text2(this,{font:h,size:r,x:n,y:this.gutterTop,text:(0!=this.scale2.min?"-":"")+RGraph.number_format(this,this.scale2.min.toFixed(a["chart.scale.decimals"]),i,s),valign:"center",halign:o,bordered:c,tag:"scale"})}e.fill()},RGraph.Bar.prototype.Drawlabels_center=function(){var t=this.canvas,e=this.context,a=this.properties,r=a["chart.text.font"],i=a["chart.ylabels.count"];if(e.fillStyle=a["chart.text.color"],"center"==a["chart.xaxispos"]){var s=a["chart.text.size"],o=a["chart.units.pre"],h=a["chart.units.post"],n="",c=0,l=!1;if(a["chart.ymin"],e.fillStyle=a["chart.text.color"],e.strokeStyle="black",1==a["chart.ylabels.inside"])var c="left"==a["chart.yaxispos"]?this.gutterLeft+5:t.width-this.gutterRight-5,n="left"==a["chart.yaxispos"]?"left":"right",l=!0;else var c="left"==a["chart.yaxispos"]?this.gutterLeft-5:t.width-this.gutterRight+5,n="left"==a["chart.yaxispos"]?"right":"left",l=!1;if("object"==typeof a["chart.ylabels.specific"]&&a["chart.ylabels.specific"]){for(var p=a["chart.ylabels.specific"],u=t.height-this.gutterTop-this.gutterBottom,d=0;p.length>d;++d){var f=this.gutterTop+u/2/(p.length-1)*d;RGraph.Text2(this,{font:r,size:s,x:c,y:f,text:p[d]+"",valign:"center",halign:n,bordered:l,tag:"scale"})}for(var d=p.length-1;d>=1;--d){var f=this.gutterTop+u*(d/(2*(p.length-1)))+u/2;RGraph.Text2(this,{font:r,size:s,x:c,y:f,text:p[p.length-d-1]+"",valign:"center",halign:n,bordered:l,tag:"scale"})}return}for(var d=0;this.scale2.labels.length>d;++d){var f=this.gutterTop+this.halfgrapharea-this.halfgrapharea/i*(d+1),g=this.scale2.labels[d];RGraph.Text2(this,{font:r,size:s,x:c,y:f,text:g,valign:"center",halign:n,bordered:l,tag:"scale"})}for(var d=this.scale2.labels.length-1;d>=0;--d){var f=this.gutterTop+this.halfgrapharea/i*(d+1)+this.halfgrapharea,g=this.scale2.labels[d];RGraph.Text2(this,{font:r,size:s,x:c,y:f,text:"-"+g,valign:"center",halign:n,bordered:l,tag:"scale"})}0!=this.scale2.min&&RGraph.Text2(this,{font:r,size:s,x:c,y:this.gutterTop+this.halfgrapharea,text:RGraph.number_format(this,this.scale2.min.toFixed(this.properties["chart.scale.decimals"]),o,h),valign:"center",valign:"center",halign:n,bordered:l,tag:"scale"})}},RGraph.Bar.prototype.Drawlabels_bottom=function(){var t=this.context,e=this.canvas,a=this.properties,r=a["chart.text.size"],i=a["chart.units.pre"],s=a["chart.units.post"];this.context;var o="left"==a["chart.yaxispos"]?"right":"left",h=a["chart.text.font"],n=a["chart.ylabels.count"];if(a["chart.ymin"],t.beginPath(),t.fillStyle=this.properties["chart.text.color"],t.strokeStyle="black",1==a["chart.ylabels.inside"])var c="left"==a["chart.yaxispos"]?this.gutterLeft+5:e.width-this.gutterRight-5,o="left"==a["chart.yaxispos"]?"left":"right",l=!0;else var c="left"==a["chart.yaxispos"]?this.gutterLeft-5:e.width-this.gutterRight+5,l=!1;if(a["chart.ylabels.specific"]&&"object"==typeof a["chart.ylabels.specific"])for(var p=a["chart.ylabels.specific"],u=e.height-this.gutterTop-this.gutterBottom,d=0;p.length>d;++d){var f=this.gutterTop+u*(d/(p.length-1));RGraph.Text2(this,{font:h,size:r,x:c,y:f,text:p[d],valign:"center",halign:o,bordered:l,tag:"scale"})}else{this.gutterTop,this.halfTextHeight,this.scale;for(var d=0;n>d;++d){var g=this.scale2.labels[d];RGraph.Text2(this,{font:h,size:r,x:c,y:this.gutterTop+this.grapharea-this.grapharea/n*(d+1),text:g,valign:"center",halign:o,bordered:l,tag:"scale"})}(0!=this.properties["chart.ymin"]||this.properties["chart.noxaxis"])&&RGraph.Text2(this,{font:h,size:r,x:c,y:this.canvas.height-this.gutterBottom,text:RGraph.number_format(this,this.scale2.min.toFixed(this.properties["chart.scale.decimals"]),i,s),valign:"center",halign:o,bordered:l,tag:"scale"}),t.fill()}},RGraph.Bar.prototype.DrawIEShadow=function(t){var e=this.context.fillStyle,a=this.properties["chart.shadow.offsetx"],r=this.properties["chart.shadow.offsety"];this.context.lineWidth=this.properties["chart.linewidth"],this.context.fillStyle=this.properties["chart.shadow.color"],this.context.beginPath(),this.context.fillRect(t[0]+a,t[1]+r,t[2],t[3]),this.context.fill(),this.context.fillStyle=e},RGraph.Bar.prototype.getShape=RGraph.Bar.prototype.getBar=function(t){var e=arguments[1]?arguments[1]:this,a=RGraph.getMouseXY(t),r=a[0],i=a[1];e.canvas,e.context;for(var s=e.coords,o=0;s.length>o;o++){var h=s[o][0],n=s[o][1],c=s[o][2],l=s[o][3];if(r>=h&&h+c>=r&&i>=n&&n+l>=i){if(e.properties["chart.tooltips"])var p=RGraph.parseTooltipText?RGraph.parseTooltipText(e.properties["chart.tooltips"],o):e.properties["chart.tooltips"][o];for(var u=0,d=o;d>=("object"==typeof e.data[u]?e.data[u].length:1);)d-="number"==typeof e.data[u]?1:e.data[u].length,u++;return"number"==typeof e.data[u]&&(d=null),{0:e,1:h,2:n,3:c,4:l,5:o,object:e,x:h,y:n,width:c,height:l,index:o,tooltip:p,index_adjusted:d,dataset:u}}}return null},RGraph.Bar.prototype.getShapeByX=function(t){t.target;for(var e=RGraph.getMouseXY(t),a=arguments[1]?arguments[1]:this,r=0;a.coords.length>r;r++){var i=e[0];e[1];var s=a.coords[r][0],o=a.coords[r][1],h=a.coords[r][2],n=a.coords[r][3];if(i>=s&&s+h>=i){if(this.properties["chart.tooltips"])var c=RGraph.parseTooltipText?RGraph.parseTooltipText(this.properties["chart.tooltips"],r):this.properties["chart.tooltips"][r];return{0:a,1:s,2:o,3:h,4:n,5:r,object:a,x:s,y:o,width:h,height:n,index:r,tooltip:c}}}return null},RGraph.Bar.prototype.getValue=function(t){if(2==t.length)var e=t[0],a=t[1];else var r=RGraph.getMouseXY(t),e=r[0],a=r[1];if(this.properties["chart.gutter.top"]>a||a>this.canvas.height-this.properties["chart.gutter.bottom"]||this.properties["chart.gutter.left"]>e||e>this.canvas.width-this.properties["chart.gutter.right"])return null;
if("center"==this.properties["chart.xaxispos"]){var i=(this.grapharea/2-(a-this.properties["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);i*=2,i>=0?i+=this.scale2.min:i-=this.scale2.min}else if("top"==this.properties["chart.xaxispos"]){var i=(this.grapharea-(a-this.properties["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);i=this.scale2.max-i,i=-1*Math.abs(i)}else{var i=(this.grapharea-(a-this.properties["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);i+=this.scale2.min}return i},RGraph.Bar.prototype.getYCoord=function(t){if(t>this.scale2.max)return null;var e,a=this.properties["chart.xaxispos"];return"top"==a?(0>t&&(t=Math.abs(t)),e=(t-this.scale2.min)/(this.scale2.max-this.scale2.min)*this.grapharea,e+=this.gutterTop):"center"==a?(e=(t-this.scale2.min)/(this.scale2.max-this.scale2.min)*(this.grapharea/2),e=this.grapharea/2-e,e+=this.gutterTop):(this.scale2.min>t&&(t=this.scale2.min),e=(t-this.scale2.min)/(this.scale2.max-this.scale2.min)*this.grapharea,e=this.canvas.height-this.gutterBottom-e),e},RGraph.Bar.prototype.Highlight=function(t){RGraph.Highlight.Rect(this,t)},RGraph.Bar.prototype.getObjectByXY=function(t){var e=RGraph.getMouseXY(t);return e[0]>=this.properties["chart.gutter.left"]&&e[0]<=this.canvas.width-this.properties["chart.gutter.right"]&&e[1]>=this.properties["chart.gutter.top"]&&e[1]<=this.canvas.height-this.properties["chart.gutter.bottom"]?this:void 0},RGraph.Bar.prototype.Adjusting_mousemove=function(t){if(RGraph.Registry.Get("chart.adjusting")&&RGraph.Registry.Get("chart.adjusting").uid==this.uid){var e=Number(this.getValue(t)),a=this.getShapeByX(t);if(a){if(RGraph.Registry.Set("chart.adjusting.shape",a),this.stackedOrGrouped&&"grouped"==this.properties["chart.grouping"]){var r=RGraph.sequentialIndexToGrouped(a.index,this.data);this.data[r[0]][r[1]]=Number(e)}else this.data[a.index]=Number(e);RGraph.RedrawCanvas(t.target),RGraph.FireCustomEvent(this,"onadjust")}}},RGraph.CombinedChart=function(){function t(t){var e=t.Get("chart.gutter.left"),a=t.Get("chart.gutter.right");t.Set("chart.hmargin",(t.canvas.width-e-a)/(2*t.original_data[0].length))}this.objects=[];var e=arguments;RGraph.is_array(arguments[0])&&(e=arguments[0]);for(var a=0;e.length>a;++a)if(this.objects[a]=e[a],this.objects[a].Set("chart.gutter.left",this.objects[0].Get("chart.gutter.left")),this.objects[a].Set("chart.gutter.right",this.objects[0].Get("chart.gutter.right")),this.objects[a].Set("chart.gutter.top",this.objects[0].Get("chart.gutter.top")),this.objects[a].Set("chart.gutter.bottom",this.objects[0].Get("chart.gutter.bottom")),"line"==this.objects[a].type&&(this.objects[a].Set("chart.hmargin",(this.objects[0].canvas.width-this.objects[0].Get("chart.gutter.right")-this.objects[0].Get("chart.gutter.left"))/this.objects[0].data.length/2),this.objects[a].Set("chart.noaxes",!0),this.objects[a].Set("chart.background.grid",!1),this.objects[a].Set("chart.ylabels",!1)),this.objects[a].Get("chart.resizable"))var r=this.objects[a];r&&RGraph.AddCustomEventListener(r,"onresizebeforedraw",t)},RGraph.CombinedChart.prototype.Add=function(t){this.objects.push(t)},RGraph.CombinedChart.prototype.Draw=function(){for(var t=0;this.objects.length>t;++t)"function"==typeof arguments[t]?arguments[t](this.objects[t]):this.objects[t].Draw()},RGraph.Bar.prototype.positionTooltip=function(t,e,a,r){var i=t.coords[r.__index__][0],s=t.coords[r.__index__][1],o=t.coords[r.__index__][2],h=t.coords[r.__index__][3],n=RGraph.getCanvasXY(t.canvas);t.Get("chart.gutter.left"),t.Get("chart.gutter.top");var c=r.offsetWidth,l=r.offsetHeight,p=t.data_arr[r.__index__];r.style.left=0,r.style.top=n[1]+s-l-7+"px",0>p&&(r.style.top=n[1]+s+h+7+"px"),r.style.overflow="";var u=new Image;u.style.position="absolute",u.id="__rgraph_tooltip_pointer__",p>=0?(u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC",u.style.top=r.offsetHeight-2+"px"):(u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAFCAMAAACkeOZkAAAAK3RFWHRDcmVhdGlvbiBUaW1lAFNhdCA2IE9jdCAyMDEyIDEyOjQ5OjMyIC0wMDAw2S1RlgAAAAd0SU1FB9wKBgszM4Ed2k4AAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAEZ0FNQQAAsY8L/GEFAAAACVBMVEX/AAC9vb3//+92Pom0AAAAAXRSTlMAQObYZgAAAB1JREFUeNpjYAABRgY4YGRiRDCZYBwQE8qBMEEcAANCACqByy1sAAAAAElFTkSuQmCC",u.style.top="-5px"),r.appendChild(u),10>n[0]+i+o/2-c/2?(r.style.left=n[0]+i-.1*c+o/2+"px",u.style.left=.1*c-8.5+"px"):n[0]+i+c/2>document.body.offsetWidth?(r.style.left=n[0]+i-.9*c+o/2+"px",u.style.left=.9*c-8.5+"px"):(r.style.left=n[0]+i+o/2-.5*c+"px",u.style.left=.5*c-8.5+"px")},RGraph.Bar.prototype.parseColors=function(){var t=this.properties,e=t["chart.colors"];if(e)for(var a=0;e.length>a;++a)e[a]=this.parseSingleColorForGradient(e[a]);var e=t["chart.key.colors"];if(e)for(var a=0;e.length>a;++a)e[a]=this.parseSingleColorForGradient(e[a]);t["chart.crosshairs.color"]=this.parseSingleColorForGradient(t["chart.crosshairs.color"]),t["chart.highlight.stroke"]=this.parseSingleColorForGradient(t["chart.highlight.stroke"]),t["chart.highlight.fill"]=this.parseSingleColorForGradient(t["chart.highlight.fill"]),t["chart.text.color"]=this.parseSingleColorForGradient(t["chart.text.color"]),t["chart.background.barcolor1"]=this.parseSingleColorForGradient(t["chart.background.barcolor1"]),t["chart.background.barcolor2"]=this.parseSingleColorForGradient(t["chart.background.barcolor2"]),t["chart.background.grid.color"]=this.parseSingleColorForGradient(t["chart.background.grid.color"]),t["chart.strokecolor"]=this.parseSingleColorForGradient(t["chart.strokecolor"]),t["chart.axis.color"]=this.parseSingleColorForGradient(t["chart.axis.color"])},RGraph.Bar.prototype.parseSingleColorForGradient=function(t){if(!t||"string"!=typeof t)return t;if(t.match(/^gradient\((.*)\)$/i)){var e=RegExp.$1.split(":"),a=this.context.createLinearGradient(0,this.canvas.height-this.properties["chart.gutter.bottom"],0,this.properties["chart.gutter.top"]),r=1/(e.length-1);a.addColorStop(0,RGraph.trim(e[0]));for(var i=1;e.length>i;++i)a.addColorStop(i*r,RGraph.trim(e[i]))}return a?a:t},RGraph.Bar.prototype.DrawBevel=function(){var t=this.coords,e=this.coords2,a=this.context;if("stacked"==this.properties["chart.grouping"]){for(var r=0;e.length>r;++r)if(e[r]&&e[r][0]&&e[r][0][0]){for(var i=e[r][0][0],s=e[r][0][1],o=e[r][0][2],h=[],n=0;e[r].length>n;++n)h.push(e[r][n][3]);var c=RGraph.array_sum(h);a.save(),a.strokeStyle="black",a.beginPath(),a.rect(i,s,o,c),a.clip(),a.shadowColor="black",a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=20,a.beginPath(),a.rect(i-3,s-3,o+6,c+100),a.lineWidth=5,a.stroke(),a.restore()}}else for(var r=0;t.length>r;++r)if(t[r]){var i=t[r][0],s=t[r][1],o=t[r][2],c=t[r][3],l=this.properties["chart.xaxispos"],p=(this.canvas.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop;a.save(),a.strokeStyle="black",a.beginPath(),a.rect(i,s,o,c),a.clip(),a.shadowColor="black",a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=20,"top"==l||"center"==l&&s+c>p?(s-=100,c+=100):(s=s,c+=100),a.beginPath(),a.rect(i-3,s-3,o+6,c+6),a.lineWidth=5,a.stroke(),a.restore()}};